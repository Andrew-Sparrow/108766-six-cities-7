(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{79:function(e,t,a){"use strict";a.r(t);var c=a(1),s=a.n(c),i=a(13),r=a.n(i),n=a(7),o=a(3),l=a(43),d=a.n(l),j=null!==localStorage.getItem("token")?localStorage.getItem("token"):"",u=a(6),m=a(8),b="/",p="/login",h="/favorites",_="/offer/:id",v=["Paris","Cologne","Brussels","Amsterdam","Hamburg","Dusseldorf"],O="AUTH",g="NO_AUTH",x="UNAUTHORIZED",f="/hotels",y="/favorite",N="/comments",w="/login",k="/logout",C="Popular",P="Price: low to high",S="Price: high to low",F="Top rated first",R=a(18),I="places/changeCity",T="places/sortBy",L="places/loadPlaces",E="places/loadNearbyPlaces",M="places/removeNearbyPlaces",q="places/isFavorite",z="comments/loadComments",A="comments/removeComments",B="user/changeAuthorizationStatus",D="user/changeLogin",U="user/logout",H="comment/changeLoadingCommentProcessStatus",W="comment/showErrorCommentFormMessage",K="comment/changeCommentSendedSuccessfulyStatus",V="places/resetFavorites",J="places/redirectToRoute",Y=Object(n.b)(H,(function(e){return{payload:e}})),Z=Object(n.b)(K,(function(e){return{payload:e}})),G=Object(n.b)(W,(function(e,t){return{payload:{isShowErrorMessage:e,errorMessageText:t}}})),Q=Object(n.b)(I,(function(e){return{payload:e}})),X=Object(n.b)(T,(function(e){return{payload:e}})),$=Object(n.b)(L,(function(e){return{payload:e}})),ee=Object(n.b)(E,(function(e){return{payload:e}})),te=Object(n.b)(M),ae=Object(n.b)(z,(function(e){return{payload:e}})),ce=Object(n.b)(A),se=Object(n.b)(B,(function(e){return{payload:e}})),ie=Object(n.b)(D,(function(e){return{payload:e}})),re=Object(n.b)(q,(function(e,t){return{payload:{id:e,newPlace:t}}})),ne=Object(n.b)(U),oe=Object(n.b)(V,(function(e){return{payload:e}})),le=Object(n.b)(J,(function(e){return{payload:e}})),de=a(25),je=a(22),ue=a(44),me=a(45),be=a(46),pe=a.n(be),he=function(){function e(){Object(ue.a)(this,e)}return Object(me.a)(e,null,[{key:"adaptToClient",value:function(e){var t=Object.assign({},e,{host:Object.assign({},e.host,{avatarUrl:e.host.avatar_url,isPro:e.host.is_pro}),isFavorite:e.is_favorite,isPremium:e.is_premium,maxAdults:e.max_adults,previewImage:e.preview_image});return delete t.host.avatar_url,delete t.host.is_pro,delete t.is_favorite,delete t.is_premium,delete t.max_adults,delete t.preview_image,t}},{key:"adaptPlacesToClient",value:function(e){var t=this;return e.map((function(e){return t.adaptToClient(e)}))}},{key:"adaptCommentToClient",value:function(e){var t=Object.assign({},e,{comment:e.comment,date:e.date,id:e.id,rating:e.rating,user:Object.assign({},e.user,{avatarUrl:e.user.avatar_url,isPro:e.user.is_pro,id:e.user.id,name:e.user.name})});return delete t.user.avatar_url,delete t.user.is_pro,t}},{key:"getFavoritePlacesSeparatedByCity",value:function(e){var t=new Map;return e.forEach((function(e){e.isFavorite&&(t.has(e.city.name)||t.set(e.city.name,[]),t.get(e.city.name).push(e))})),t}},{key:"getFilteredPlaces",value:function(e,t){return t.filter((function(t){return t.city.name===e}))}},{key:"generateIdKeys",value:function(e){return new Array(e).fill("").map((function(){return pe()(10)}))}},{key:"getWidthByRating",value:function(e){return 100*Math.round(e)/5}},{key:"getUpdatedPlaces",value:function(e,t,a){var c=this.adaptToClient(a),s=Object(je.a)(t),i=s.findIndex((function(t){return t.id===e}));return s[i].isFavorite=c.isFavorite,s}},{key:"getNearbyPlacesFromCommonPlaces",value:function(e,t){var a=[];return e.forEach((function(e){var c=t.findIndex((function(t){return t.id===e.id}));a.push(t[c])})),a}},{key:"resetFavoriteStates",value:function(e){return e.map((function(e){return e=Object(de.a)(Object(de.a)({},e),{},{isFavorite:!1})}))}},{key:"getIsTokenExist",value:function(e){null!==localStorage.getItem("token")&&(e(ie(localStorage.getItem("login"))),e(se(O)))}}]),e}();he.formatDate=function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short"})},he.getSortedPlaces=function(e,t){var a=t.slice();switch(e){case C:return a;case P:return t.sort((function(e,t){return e.price-t.price}));case S:return function(e){return e.sort((function(e,t){return t.price-e.price}))}(t);case F:return function(e){return e.sort((function(e,t){return t.rating-e.rating}))}(t);default:return a}};var _e=he,ve=function(e,t){return function(a,c,s){return s.post("".concat(y,"/").concat(e,"/").concat(t?1:0)).then((function(t){a(re(e,t.data))})).catch((function(e){}))}},Oe=a(0);var ge,xe=function(e){var t=e.id,a=e.price,c=e.title,s=e.isFavorite,i=e.type,r=e.width,n=e.onFavoriteClick;return Object(Oe.jsxs)("div",{className:"place-card__info",children:[Object(Oe.jsxs)("div",{className:"place-card__price-wrapper",children:[Object(Oe.jsxs)("div",{className:"place-card__price",children:[Object(Oe.jsxs)("b",{className:"place-card__price-value",children:["\u20ac",a]}),Object(Oe.jsx)("span",{className:"place-card__price-text",children:"/\xa0night"})]}),Object(Oe.jsxs)("button",{className:"place-card__bookmark-button button",type:"button",onClick:n,children:[Object(Oe.jsx)("svg",{className:"place-card__bookmark-icon",width:"18",height:"19",style:{stroke:s&&"#4481c3",fill:s&&"#4481c3"},children:Object(Oe.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(Oe.jsx)("span",{className:"visually-hidden",children:"To bookmarks"})]})]}),Object(Oe.jsx)("div",{className:"place-card__rating rating",children:Object(Oe.jsxs)("div",{className:"place-card__stars rating__stars",children:[Object(Oe.jsx)("span",{style:{width:"".concat(r,"%")}}),Object(Oe.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(Oe.jsx)("h2",{className:"place-card__name",children:Object(Oe.jsx)(u.b,{to:"/offer/".concat(t),children:c})}),Object(Oe.jsx)("p",{className:"place-card__type",children:i})]})},fe=a(19),ye=a(14),Ne={authorizationStatus:g,login:x},we=Object(n.c)(Ne,(function(e){e.addCase(se,(function(e,t){e.authorizationStatus=t.payload})).addCase(ie,(function(e,t){e.login=t.payload})).addCase(ne,(function(e){e.authorizationStatus=g,e.login=x}))})),ke={places:[],sortBy:C,isDataLoaded:!1,activeCityName:"Paris",isNearbyPlacesLoaded:!1,nearbyPlaces:[]},Ce=Object(n.c)(ke,(function(e){e.addCase(Q,(function(e,t){e.activeCityName=t.payload})).addCase(X,(function(e,t){e.sortBy=t.payload})).addCase($,(function(e,t){e.places=t.payload,e.isDataLoaded=!0})).addCase(ee,(function(e,t){e.nearbyPlaces=t.payload,e.isNearbyPlacesLoaded=!0})).addCase(te,(function(e){e.nearbyPlaces=[],e.isNearbyPlacesLoaded=!1})).addCase(re,(function(e,t){e.places=_e.getUpdatedPlaces(t.payload.id,e.places,t.payload.newPlace)})).addCase(oe,(function(e,t){e.places=_e.resetFavoriteStates(t.payload)}))})),Pe=Object(n.c)({comments:[],isCommentsLoaded:!1},(function(e){e.addCase(ae,(function(e,t){e.comments=t.payload,e.isCommentsLoaded=!0})).addCase(ce,(function(e){e.comments=[],e.isCommentsLoaded=!1}))})),Se=Object(n.c)({isCommentSending:!1,isCommentFormSendedSuccessfully:null,isShowCommentErrorMessage:!1,commentErrorMessage:null},(function(e){e.addCase(Y,(function(e,t){e.isCommentSending=t.payload})).addCase(Z,(function(e,t){e.isCommentFormSendedSuccessfully=t.payload})).addCase(G,(function(e,t){e.isShowCommentErrorMessage=t.payload.isShowErrorMessage,e.commentErrorMessage=t.payload.errorMessageText}))})),Fe="PLACES",Re="COMMENTS",Ie="USER",Te="COMMENT",Le=Object(ye.c)((ge={},Object(fe.a)(ge,Ie,we),Object(fe.a)(ge,Fe,Ce),Object(fe.a)(ge,Re,Pe),Object(fe.a)(ge,Te,Se),ge)),Ee=function(e){return e[Ie].authorizationStatus},Me=function(e){return e[Ie].login};var qe=function(e){var t=e.id,a=e.price,c=e.onListItemHover,s=e.title,i=e.isPremium,r=e.isFavorite,n=e.type,l=e.rating,d=e.previewImage,j=Object(m.g)(),b=Object(o.b)(),h=Object(o.c)(Ee),_=_e.getWidthByRating(l);return Object(Oe.jsxs)("article",{className:"cities__place-card place-card",onMouseEnter:function(e){c(e.currentTarget)},id:t,children:[i&&Object(Oe.jsx)("div",{className:"place-card__mark",children:Object(Oe.jsx)("span",{children:"Premium"})}),Object(Oe.jsx)("div",{className:"cities__image-wrapper place-card__image-wrapper",children:Object(Oe.jsx)(u.b,{to:"/offer/".concat(t),children:Object(Oe.jsx)("img",{className:"place-card__image",src:d,width:"260",height:"200",alt:"Place"})})}),Object(Oe.jsx)(xe,{id:t,price:a,title:s,isFavorite:r,type:n,width:_,onFavoriteClick:function(e){e.preventDefault(),h===g?j.push(p):b(ve(t,!r))}})]})},ze=a(5),Ae=a.n(ze);Ae.a.shape({id:Ae.a.number.isRequired,price:Ae.a.number.isRequired,bedrooms:Ae.a.number.isRequired,city:Ae.a.shape({location:Ae.a.shape({latitude:Ae.a.number.isRequired,longitude:Ae.a.number.isRequired,zoom:Ae.a.number.isRequired}).isRequired,name:Ae.a.string.isRequired}).isRequired,description:Ae.a.string.isRequired,goods:Ae.a.arrayOf(Ae.a.string).isRequired,host:Ae.a.shape({id:Ae.a.number.isRequired,avatarUrl:Ae.a.string,isPro:Ae.a.bool,name:Ae.a.string.isRequired}),images:Ae.a.arrayOf(Ae.a.string).isRequired,isFavorite:Ae.a.bool,isPremium:Ae.a.bool,location:Ae.a.shape({latitude:Ae.a.number.isRequired,longitude:Ae.a.number.isRequired,zoom:Ae.a.number.isRequired}),maxAdults:Ae.a.number,previewImage:Ae.a.string,rating:Ae.a.number.isRequired,title:Ae.a.string.isRequired,type:Ae.a.string.isRequired});var Be=function(e){var t=e.places,a=e.onListItemHover;return Object(Oe.jsx)("div",{className:"cities__places-list places__list tabs__content",children:t.map((function(e){return Object(Oe.jsx)(qe,{id:e.id,price:e.price,onListItemHover:a,title:e.title,isPremium:e.isPremium,isFavorite:e.isFavorite,type:e.type,rating:e.rating,previewImage:e.previewImage},e.id)}))})};var De=function(e){return Object(Oe.jsx)("li",{className:"header__nav-item user",children:Object(Oe.jsxs)(u.b,{className:"header__nav-link header__nav-link--profile",to:p,children:[Object(Oe.jsx)("div",{className:"header__avatar-wrapper user__avatar-wrapper"}),Object(Oe.jsx)("span",{className:"header__login",children:"Sign in"})]})})},Ue=a(28),He=function(e){return e[Fe].places},We=function(e){return e[Fe].sortBy},Ke=function(e){return e[Fe].isDataLoaded},Ve=function(e){return e[Fe].activeCityName},Je=function(e){return e[Fe].isNearbyPlacesLoaded},Ye=function(e){return e[Fe].nearbyPlaces};var Ze=function(e){var t=e.login,a=Object(o.c)(He),s=Object(o.b)();return Object(Oe.jsxs)(c.Fragment,{children:[Object(Oe.jsx)(Ue.a,{trigger:["hover"],placement:"bottom",overlay:Object(Oe.jsx)("div",{style:{height:60,width:150,fontSize:20},children:"Click to show up favorites"}),children:Object(Oe.jsx)("li",{className:"header__nav-item user",children:Object(Oe.jsxs)(u.b,{className:"header__nav-link header__nav-link--profile",to:h,children:[Object(Oe.jsx)("div",{className:"header__avatar-wrapper user__avatar-wrapper"}),Object(Oe.jsx)("span",{className:"header__user-name user__name",children:t})]})})}),Object(Oe.jsx)("li",{className:"header__nav-item",children:Object(Oe.jsx)(u.b,{className:"header__nav-link",to:b,onClick:function(){s((function(e,t,a){localStorage.removeItem("token"),localStorage.removeItem("login"),a.delete(k).then((function(){e(ne())}))})),s(oe(a))},children:Object(Oe.jsx)("span",{className:"header__signout",children:"Sign out"})})})]})};var Ge=function(e){var t=e.children,a=e.className,c=Object(o.c)(Me),s=Object(o.c)(Ee);return Object(Oe.jsxs)("div",{className:a,children:[Object(Oe.jsx)("header",{className:"header",children:Object(Oe.jsx)("div",{className:"container",children:Object(Oe.jsxs)("div",{className:"header__wrapper",children:[Object(Oe.jsx)("div",{className:"header__left",children:Object(Oe.jsx)(u.b,{className:"header__logo-link header__logo-link--active",to:"/",children:Object(Oe.jsx)("img",{className:"header__logo",src:"img/logo.svg",alt:"6 cities logo",width:"81",height:"41"})})}),Object(Oe.jsx)("nav",{className:"header__nav",children:Object(Oe.jsx)("ul",{className:"header__nav-list",children:s===O?Object(Oe.jsx)(Ze,{login:c}):Object(Oe.jsx)(De,{})})})]})})}),t]})},Qe=function(e,t){return function(a){return Object(Oe.jsx)(Ge,{className:t,children:Object(Oe.jsx)(e,Object(de.a)({},a))})}};Qe.displayName="withLayout";var Xe=Qe,$e=a(20),et=a.n($e);a(77);var tt=function(e,t){var a=Object(c.useState)(null),s=Object(R.a)(a,2),i=s[0],r=s[1];return Object(c.useEffect)((function(){if(null===i){var a=et.a.map(e.current,{center:{lat:t.location.latitude,lng:t.location.longitude},zoom:12,zoomControl:!1,marker:!0});et.a.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'}).addTo(a),r(a)}else void 0!==t.location&&i.panTo({lat:t.location.latitude,lng:t.location.longitude})}),[e,i,t]),i};var at=function(e){var t=e.activeCityName,a=e.city,s=e.points,i=e.selectedPoint,r=Object(c.useRef)(null),n=tt(r,a),o=et.a.icon({iconUrl:"img/pin.svg",iconSize:[27,39],iconAnchor:[14,39]}),l=et.a.icon({iconUrl:"img/pin-active.svg",iconSize:[27,39],iconAnchor:[14,39]});return Object(c.useEffect)((function(){n&&s.forEach((function(e){et.a.marker({lat:e.location.latitude,lng:e.location.longitude},{icon:e.id===i.id?l:o}).addTo(n)}))}),[n,a,s,i,t,l,o]),Object(Oe.jsx)("div",{style:{height:"100%"},ref:r})};var ct=function(e){var t=Object(o.c)(Ve),a=Object(o.b)(),c=function(e){e.preventDefault(),a(Q(e.currentTarget.dataset.city)),a(X(C))};return Object(Oe.jsx)("div",{className:"tabs",children:Object(Oe.jsx)("section",{className:"locations container",children:Object(Oe.jsx)("ul",{className:"locations__list tabs__list",children:v.map((function(e){return Object(Oe.jsx)("li",{className:"locations__item",children:Object(Oe.jsx)(u.b,{"data-city":e,className:"locations__item-link tabs__item ".concat(e===t&&"tabs__item--active"),to:"#",onClick:c,children:Object(Oe.jsx)("span",{children:e})})},e)}))})})})};var st=function(e){var t=Object(c.useState)(!1),a=Object(R.a)(t,2),s=a[0],i=a[1],r=Object(o.c)(We),n=Object(o.b)(),l=function(e){n(X(e.target.innerText))};return Object(Oe.jsxs)("form",{className:"places__sorting",action:"#",method:"get",onClick:function(e){return function(e){e.preventDefault(),i((function(e){return!e}))}(e)},children:[Object(Oe.jsx)("span",{className:"places__sorting-caption",children:"Sort by\xa0"}),Object(Oe.jsxs)("span",{className:"places__sorting-type",tabIndex:"0",children:[r,Object(Oe.jsx)("svg",{className:"places__sorting-arrow",width:"7",height:"4",children:Object(Oe.jsx)("use",{xlinkHref:"#icon-arrow-select"})})]}),Object(Oe.jsxs)("ul",{className:"places__options places__options--custom ".concat(s&&"places__options--opened"),children:[Object(Oe.jsx)("li",{className:"places__option ".concat(r===C&&"places__option--active"),tabIndex:"0",onClick:l,children:C}),Object(Oe.jsx)("li",{className:"places__option ".concat(r===P&&"places__option--active"),tabIndex:"0",onClick:l,children:P}),Object(Oe.jsx)("li",{className:"places__option ".concat(r===S&&"places__option--active"),tabIndex:"0",onClick:l,children:S}),Object(Oe.jsx)("li",{className:"places__option ".concat(r===F&&"places__option--active"),tabIndex:"0",onClick:l,children:F})]})]})};var it=function(e){var t=e.activeCityName;return Object(Oe.jsx)("div",{className:"cities",children:Object(Oe.jsxs)("div",{className:"cities__places-container cities__places-container--empty container",children:[Object(Oe.jsx)("section",{className:"cities__no-places",children:Object(Oe.jsxs)("div",{className:"cities__status-wrapper tabs__content",children:[Object(Oe.jsx)("b",{className:"cities__status",children:"No places to stay available"}),Object(Oe.jsxs)("p",{className:"cities__status-description",children:["We could not find any property available at the moment in ",t]})]})}),Object(Oe.jsx)("div",{className:"cities__right-section"})]})})};var rt=Xe((function(){var e=Object(c.useState)({}),t=Object(R.a)(e,2),a=t[0],s=t[1],i=Object(o.c)(Ve),r=Object(o.c)(He),n=Object(o.c)(We),l=_e.getFilteredPlaces(i,r),d=_e.getSortedPlaces(n,l);return Object(Oe.jsxs)("main",{className:"page__main page__main--index",children:[Object(Oe.jsx)("h1",{className:"visually-hidden",children:"Cities"}),Object(Oe.jsx)(ct,{}),0===d.length?Object(Oe.jsx)(it,{activeCityName:i}):Object(Oe.jsx)("div",{className:"cities",children:Object(Oe.jsxs)("div",{className:"cities__places-container container",children:[Object(Oe.jsxs)("section",{className:"cities__places places",children:[Object(Oe.jsx)("h2",{className:"visually-hidden",children:"Places"}),Object(Oe.jsxs)("b",{className:"places__found",children:[d.length," places to stay in ",i]}),Object(Oe.jsx)(st,{}),Object(Oe.jsx)(Be,{places:d,onListItemHover:function(e){var t=d.find((function(t){return t.id===parseInt(e.id,10)}));s(t)}})]}),Object(Oe.jsx)("div",{className:"cities__right-section",children:Object(Oe.jsx)("section",{className:"cities__map map",children:Object(Oe.jsx)(at,{activeCityName:i,city:0!==d.length&&d[0].city,points:d,selectedPoint:a})})})]})})]})}));var nt=function(e){var t=e.id,a=e.price,c=e.title,s=e.type,i=e.isFavorite,r=Object(o.b)();return Object(Oe.jsxs)("article",{className:"favorites__card place-card",children:[Object(Oe.jsx)("div",{className:"favorites__image-wrapper place-card__image-wrapper",children:Object(Oe.jsx)(u.b,{to:"/offer/".concat(t),children:Object(Oe.jsx)("img",{className:"place-card__image",src:"img/apartment-small-03.jpg",width:150,height:110,alt:"Place"})})}),Object(Oe.jsxs)("div",{className:"favorites__card-info place-card__info",children:[Object(Oe.jsxs)("div",{className:"place-card__price-wrapper",children:[Object(Oe.jsxs)("div",{className:"place-card__price",children:[Object(Oe.jsxs)("b",{className:"place-card__price-value",children:["\u20ac",a]}),Object(Oe.jsx)("span",{className:"place-card__price-text",children:"/\xa0night"})]}),Object(Oe.jsxs)("button",{className:"place-card__bookmark-button place-card__bookmark-button--active button",type:"button",onClick:function(e){r(ve(t,!i))},children:[Object(Oe.jsx)("svg",{className:"place-card__bookmark-icon",width:18,height:19,children:Object(Oe.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(Oe.jsx)("span",{className:"visually-hidden",children:"In bookmarks"})]})]}),Object(Oe.jsx)("div",{className:"place-card__rating rating",children:Object(Oe.jsxs)("div",{className:"place-card__stars rating__stars",children:[Object(Oe.jsx)("span",{style:{width:"100%"}}),Object(Oe.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(Oe.jsx)("h2",{className:"place-card__name",children:Object(Oe.jsx)(u.b,{to:"/",children:c})}),Object(Oe.jsx)("p",{className:"place-card__type",children:s})]})]})};var ot=function(e){var t=e.city,a=e.favoritePlaces;return Object(Oe.jsxs)("li",{className:"favorites__locations-items",children:[Object(Oe.jsx)("div",{className:"favorites__locations locations locations--current",children:Object(Oe.jsx)("div",{className:"locations__item",children:Object(Oe.jsx)(u.b,{className:"locations__item-link",to:"/",children:Object(Oe.jsx)("span",{children:t})})})}),Object(Oe.jsx)("div",{className:"favorites__places",children:a.map((function(e){var t=e.id,a=e.isFavorite,c=e.price,s=e.title,i=e.type;return Object(Oe.jsx)(nt,{id:t,isFavorite:a,price:c,title:s,type:i},t)}))})]})};var lt=function(e){var t=e.favoriteList;return Object(Oe.jsx)("ul",{className:"favorites__list",children:Object(je.a)(t.keys()).map((function(e){return Object(Oe.jsx)(ot,{city:e,favoritePlaces:t.get(e)},e)}))})};var dt=function(e){return Object(Oe.jsx)("main",{className:"page__main page__main--favorites page__main--favorites-empty",children:Object(Oe.jsx)("div",{className:"page__favorites-container container",children:Object(Oe.jsxs)("section",{className:"favorites favorites--empty",children:[Object(Oe.jsx)("h1",{className:"visually-hidden",children:"Favorites (empty)"}),Object(Oe.jsxs)("div",{className:"favorites__status-wrapper",children:[Object(Oe.jsx)("b",{className:"favorites__status",children:"Nothing yet saved."}),Object(Oe.jsx)("p",{className:"favorites__status-description",children:"Save properties to narrow down search or plan your future trips."})]})]})})})};var jt=Xe((function(e){var t=e.places,a=_e.getFavoritePlacesSeparatedByCity(t);return Object(Oe.jsxs)(c.Fragment,{children:[0===a.size?Object(Oe.jsx)(dt,{}):Object(Oe.jsx)("main",{className:"page__main page__main--favorites",children:Object(Oe.jsx)("div",{className:"page__favorites-container container",children:Object(Oe.jsxs)("section",{className:"favorites",children:[Object(Oe.jsx)("h1",{className:"favorites__title",children:"Saved listing"}),Object(Oe.jsx)(lt,{favoriteList:a})]})})}),Object(Oe.jsx)("footer",{className:"footer container",children:Object(Oe.jsx)(u.b,{className:"footer__logo-link",to:"/",children:Object(Oe.jsx)("img",{className:"footer__logo",src:"img/logo.svg",alt:"6 cities logo",width:64,height:33})})})]})}),"page page--favorites-empty");var ut=function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),a=Object(o.b)();return Object(Oe.jsxs)(c.Fragment,{children:[Object(Oe.jsx)("div",{style:{display:"none"},children:Object(Oe.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",children:[Object(Oe.jsx)("symbol",{id:"icon-arrow-select",viewBox:"0 0 7 4",children:Object(Oe.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 0l3.5 2.813L7 0v1.084L3.5 4 0 1.084V0z"})}),Object(Oe.jsx)("symbol",{id:"icon-bookmark",viewBox:"0 0 17 18",children:Object(Oe.jsx)("path",{d:"M3.993 2.185l.017-.092V2c0-.554.449-1 .99-1h10c.522 0 .957.41.997.923l-2.736 14.59-4.814-2.407-.39-.195-.408.153L1.31 16.44 3.993 2.185z"})}),Object(Oe.jsx)("symbol",{id:"icon-star",viewBox:"0 0 13 12",children:Object(Oe.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.5 9.644L10.517 12 9.451 7.56 13 4.573l-4.674-.386L6.5 0 4.673 4.187 0 4.573 3.549 7.56 2.483 12 6.5 9.644z"})})]})}),Object(Oe.jsxs)("div",{className:"page page--gray page--login",children:[Object(Oe.jsx)("header",{className:"header",children:Object(Oe.jsx)("div",{className:"container",children:Object(Oe.jsxs)("div",{className:"header__wrapper",children:[Object(Oe.jsx)("div",{className:"header__left",children:Object(Oe.jsx)(u.b,{className:"header__logo-link",to:"/",children:Object(Oe.jsx)("img",{className:"header__logo",src:"img/logo.svg",alt:"6 cities logo",width:81,height:41})})}),Object(Oe.jsx)("nav",{className:"header__nav",children:Object(Oe.jsx)("ul",{className:"header__nav-list"})})]})})}),Object(Oe.jsx)("main",{className:"page__main page__main--login",children:Object(Oe.jsxs)("div",{className:"page__login-container container",children:[Object(Oe.jsxs)("section",{className:"login",children:[Object(Oe.jsx)("h1",{className:"login__title",children:"Sign in"}),Object(Oe.jsxs)("form",{className:"login__form form",action:"",method:"post",onSubmit:function(c){c.preventDefault(),a(function(e){var t=e.login,a=e.password;return function(e,c,s){localStorage.removeItem("token"),localStorage.removeItem("login"),s.post(w,{email:t,password:a}).then((function(t){localStorage.setItem("token",t.data.token),localStorage.setItem("login",t.data.email),e(ie(t.data.email)),e(se(O)),e(le(b))})).catch((function(e){}))}}({login:e.current.value,password:t.current.value}))},children:[Object(Oe.jsxs)("div",{className:"login__input-wrapper form__input-wrapper",children:[Object(Oe.jsx)("label",{className:"visually-hidden",children:"E-mail"}),Object(Oe.jsx)("input",{ref:e,className:"login__input form__input",type:"email",name:"email",placeholder:"Email",required:!0})]}),Object(Oe.jsxs)("div",{className:"login__input-wrapper form__input-wrapper",children:[Object(Oe.jsx)("label",{className:"visually-hidden",children:"Password"}),Object(Oe.jsx)("input",{ref:t,className:"login__input form__input",type:"password",name:"password",placeholder:"Password",required:!0})]}),Object(Oe.jsx)("button",{className:"login__submit form__submit button",type:"submit",children:"Sign in"})]})]}),Object(Oe.jsx)("section",{className:"locations locations--login locations--current",children:Object(Oe.jsx)("div",{className:"locations__item",children:Object(Oe.jsx)(u.b,{className:"locations__item-link",to:"/",children:Object(Oe.jsx)("span",{children:"Amsterdam"})})})})]})})]})]})};a(78);var mt=function(e){var t=e.disabled,a=e.isSending;return Object(Oe.jsx)("button",{className:"reviews__submit form__submit button",type:"submit",disabled:t,children:a?"Sending ...":"Submit"})},bt={5:"perfect",4:"good",3:"not bad",2:"badly",1:"terribly"};var pt=function(e){var t=+e.index+1,a=e.rating===t;return Object(Oe.jsxs)(c.Fragment,{children:[Object(Oe.jsx)("input",{className:"form__rating-input ".concat(a?"form__rating-input--active":""," visually-hidden"),name:"rating",defaultValue:t,id:"".concat(t,"-stars"),type:"radio",defaultChecked:!1}),Object(Oe.jsx)("label",{htmlFor:"".concat(t,"-stars"),className:"reviews__rating-label form__rating-label",title:bt[t],children:Object(Oe.jsx)("svg",{className:"form__star-image",width:37,height:33,children:Object(Oe.jsx)("use",{xlinkHref:"#icon-star"})})})]})},ht=function(e){return e[Te].isCommentSending},_t=function(e){return e[Te].isCommentFormSendedSuccessfully},vt=function(e){return e[Te].isShowCommentErrorMessage},Ot=function(e){return e[Te].commentErrorMessage};var gt=function(e){var t=Object(o.c)(ht),a=Object(o.c)(vt),s=Object(o.c)(_t),i=Object(o.c)(Ot),r=Object(c.useState)(""),n=Object(R.a)(r,2),l=n[0],d=n[1],j=Object(c.useState)(0),u=Object(R.a)(j,2),b=u[0],p=u[1],h=Object(o.b)(),_=Object(m.h)().id,v=l.length<50||l.length>300||0===b,O=_e.generateIdKeys(5);return Object(c.useEffect)((function(){s&&(d(""),p(0))}),[t,s]),Object(Oe.jsx)("fieldset",{disabled:t,style:{border:"none"},children:Object(Oe.jsxs)("form",{className:"reviews__form form",action:"",method:"post",onSubmit:function(e){e.preventDefault(),h(function(e,t,a){return function(c,s,i){c(Y(!0)),i.post("".concat(N,"/").concat(e),{comment:t,rating:a}).then((function(e){c(ae(e.data)),c(Y(!1)),c(G(!1)),c(Z(!0)),c(Z(!1))})).catch((function(e){c(G(!0,e.message)),c(Y(!1)),c(Z(!1))}))}}(_,l,b))},children:[Object(Oe.jsx)("label",{className:"reviews__label form__label",htmlFor:"review",children:"Your review"}),Object(Oe.jsx)("div",{className:"reviews__rating-form form__rating",onChange:function(e){p(+e.target.defaultValue)},children:O.map((function(e,t){return Object(Oe.jsx)(pt,{index:t,rating:b},e)})).reverse()}),Object(Oe.jsx)(Ue.a,{overlay:Object(Oe.jsx)("div",{style:{height:100,width:200,fontSize:25,textAlign:"center"},children:i}),placement:"top",visible:a,animation:"zoom",children:Object(Oe.jsx)("textarea",{className:"reviews__textarea form__textarea",onChange:function(e){d(e.target.value)},id:"review",value:l,name:"review",placeholder:"Tell how was your stay, what you like and what can be improved",onFocus:function(){a&&h(G(!1))}})}),Object(Oe.jsxs)("div",{className:"reviews__button-wrapper",children:[Object(Oe.jsxs)("p",{className:"reviews__help",children:["To submit review please make sure to set",Object(Oe.jsx)("span",{className:"reviews__star",children:"rating"}),"and describe your stay with at least",Object(Oe.jsx)("b",{className:"reviews__text-amount",children:"50 characters"}),"."]}),Object(Oe.jsx)(mt,{disabled:v,isSending:t})]})]})})};var xt=function(e){var t=e.avatarImgPath,a=e.date,c=e.text,s=e.name,i=e.rating,r=_e.getWidthByRating(i);return Object(Oe.jsxs)("li",{className:"reviews__item",children:[Object(Oe.jsxs)("div",{className:"reviews__user user",children:[Object(Oe.jsx)("div",{className:"reviews__avatar-wrapper user__avatar-wrapper",children:Object(Oe.jsx)("img",{className:"reviews__avatar user__avatar",src:t,width:54,height:54,alt:"Reviews avatar"})}),Object(Oe.jsx)("span",{className:"reviews__user-name",children:s})]}),Object(Oe.jsxs)("div",{className:"reviews__info",children:[Object(Oe.jsx)("div",{className:"reviews__rating rating",children:Object(Oe.jsxs)("div",{className:"reviews__stars rating__stars",children:[Object(Oe.jsx)("span",{style:{width:"".concat(r,"%")}}),Object(Oe.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(Oe.jsx)("p",{className:"reviews__text",children:c}),Object(Oe.jsx)("time",{className:"reviews__time",dateTime:a,children:_e.formatDate(a)})]})]})};var ft=function(e){var t=e.reviews.slice(0,10);return Object(Oe.jsx)("ul",{className:"reviews__list",children:t.map((function(e){var t=_e.adaptCommentToClient(e);return Object(Oe.jsx)(xt,{avatarImgPath:t.user.avatarUrl,date:t.date,text:t.comment,name:t.user.name,rating:t.rating},t.id)}))})};var yt=function(e){var t=e.place,a=e.onClick;return Object(Oe.jsxs)("button",{className:"property__bookmark-button button ".concat(t.isFavorite?"property__bookmark-button--active":""),type:"button",onClick:a,children:[Object(Oe.jsx)("svg",{className:"property__bookmark-icon",width:31,height:33,children:Object(Oe.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(Oe.jsx)("span",{className:"visually-hidden",children:"To bookmarks"})]})};var Nt=function(e){var t=e.imgPath;return Object(Oe.jsx)("div",{className:"property__image-wrapper",children:Object(Oe.jsx)("img",{className:"property__image",src:t,alt:"studio"})})};function wt(e){var t=e.images,a=_e.generateIdKeys(t.length);return Object(Oe.jsx)("div",{className:"property__gallery-container container",children:Object(Oe.jsx)("div",{className:"property__gallery",children:t.map((function(e,t){return Object(Oe.jsx)(Nt,{imgPath:e},a[t])}))})})}var kt=Object(c.memo)(wt,(function(e,t){return e.images===t.images}));var Ct=function(e){var t=e.good;return Object(Oe.jsx)("li",{className:"property__inside-item",children:t})};var Pt=function(e){var t=e.goods,a=_e.generateIdKeys(t.length);return Object(Oe.jsx)("ul",{className:"property__inside-list",children:t.map((function(e,t){return Object(Oe.jsx)(Ct,{good:e},a[t])}))})};var St=function(e){var t=e.id,a=e.price,c=e.title,s=e.isPremium,i=e.isFavorite,r=e.type,n=e.rating,l=e.previewImage,d=Object(o.b)(),j=Object(m.g)(),b=Object(o.c)(Ee),h=_e.getWidthByRating(n);return Object(Oe.jsxs)("article",{className:"near-places__card place-card",id:t,children:[s&&Object(Oe.jsx)("div",{className:"place-card__mark",children:Object(Oe.jsx)("span",{children:"Premium"})}),Object(Oe.jsx)("div",{className:"near-places__image-wrapper place-card__image-wrapper",children:Object(Oe.jsx)(u.b,{to:"/offer/".concat(t),children:Object(Oe.jsx)("img",{className:"place-card__image",src:l,width:"260",height:"200",alt:"Place"})})}),Object(Oe.jsx)(xe,{id:t,price:a,title:c,isFavorite:i,type:r,width:h,onFavoriteClick:function(e){e.preventDefault(),b===g?j.push(p):d(ve(t,!i))}})]})};var Ft=function(e){var t=e.nearbyPlaces,a=e.commonPlaces,c=_e.getNearbyPlacesFromCommonPlaces(t,a);return Object(Oe.jsx)("div",{className:"near-places__list places__list",children:c.map((function(e){return Object(Oe.jsx)(St,{id:e.id,price:e.price,title:e.title,isPremium:e.isPremium,isFavorite:e.isFavorite,type:e.type,previewImage:e.previewImage},e.id)}))})};var Rt=function(){return Object(Oe.jsx)("p",{children:"Loading..."})},It=function(e){return e[Re].comments},Tt=function(e){return e[Re].isCommentsLoaded};var Lt=Xe((function(e){var t=Object(m.h)().id,a=Object(o.b)(),s=Object(m.g)(),i=Object(o.c)(He),r=Object(o.c)(Je),n=Object(o.c)(Ye),l=Object(o.c)(It),d=Object(o.c)(Tt),j=Object(o.c)(Ee),b=i.find((function(e){return e.id===+t})),h=[].concat(Object(je.a)(n),[b]),_=_e.getWidthByRating(b.rating);return Object(c.useEffect)((function(){return a(function(e){return function(t,a,c){return c.get("".concat(N,"/").concat(e)).then((function(e){t(ae(e.data))})).catch((function(e){}))}}(t)),a(function(e){return function(t,a,c){return c.get("".concat(f,"/").concat(e,"/nearby")).then((function(e){var a=e.data,c=_e.adaptPlacesToClient(a);t(ee(c))})).catch((function(e){}))}}(t)),function(){a(te()),a(ce())}}),[t,a]),Object(Oe.jsxs)(c.Fragment,{children:[Object(Oe.jsxs)("main",{className:"page__main",children:[Object(Oe.jsxs)("section",{className:"property",children:[Object(Oe.jsx)(kt,{images:b.images}),Object(Oe.jsx)("div",{className:"property__container container",children:Object(Oe.jsxs)("div",{className:"property__wrapper",children:[b.isPremium&&Object(Oe.jsx)("div",{className:"property__mark",children:Object(Oe.jsx)("span",{children:"Premium"})}),Object(Oe.jsxs)("div",{className:"property__name-wrapper",children:[Object(Oe.jsx)("h1",{className:"property__name",children:b.description}),Object(Oe.jsx)(yt,{place:b,onClick:function(e){e.preventDefault(),j===g?s.push(p):a(ve(b.id,!b.isFavorite))}})]}),Object(Oe.jsxs)("div",{className:"property__rating rating",children:[Object(Oe.jsxs)("div",{className:"property__stars rating__stars",children:[Object(Oe.jsx)("span",{style:{width:"".concat(_,"%")}}),Object(Oe.jsx)("span",{className:"visually-hidden",children:"Rating"})]}),Object(Oe.jsx)("span",{className:"property__rating-value rating__value",children:Math.round(b.rating)})]}),Object(Oe.jsxs)("ul",{className:"property__features",children:[Object(Oe.jsx)("li",{className:"property__feature property__feature--entire",children:b.type}),Object(Oe.jsxs)("li",{className:"property__feature property__feature--bedrooms",children:[b.bedrooms," Bedrooms"]}),Object(Oe.jsxs)("li",{className:"property__feature property__feature--adults",children:["Max ",b.maxAdults," adults"]})]}),Object(Oe.jsxs)("div",{className:"property__price",children:[Object(Oe.jsxs)("b",{className:"property__price-value",children:["\u20ac",b.price]}),Object(Oe.jsx)("span",{className:"property__price-text",children:"\xa0night"})]}),Object(Oe.jsxs)("div",{className:"property__inside",children:[Object(Oe.jsx)("h2",{className:"property__inside-title",children:"What's inside"}),Object(Oe.jsx)(Pt,{goods:b.goods})]}),Object(Oe.jsxs)("div",{className:"property__host",children:[Object(Oe.jsx)("h2",{className:"property__host-title",children:"Meet the host"}),Object(Oe.jsxs)("div",{className:"property__host-user user",children:[Object(Oe.jsx)("div",{className:"property__avatar-wrapper ".concat(b.host.isPro&&"property__avatar-wrapper--pro"," user__avatar-wrapper"),children:Object(Oe.jsx)("img",{className:"property__avatar user__avatar",src:b.host.avatarUrl,width:74,height:74,alt:"Host avatar"})}),Object(Oe.jsx)("span",{className:"property__user-name",children:b.host.name}),b.host.isPro&&Object(Oe.jsx)("span",{className:"property__user-status",children:"Pro"})]}),Object(Oe.jsx)("div",{className:"property__description",children:Object(Oe.jsx)("p",{className:"property__text",children:b.description})})]}),Object(Oe.jsxs)("section",{className:"property__reviews reviews",children:[d?Object(Oe.jsxs)(c.Fragment,{children:[Object(Oe.jsxs)("h2",{className:"reviews__title",children:["Reviews \xb7 ",Object(Oe.jsx)("span",{className:"reviews__amount",children:l.length})]}),Object(Oe.jsx)(ft,{reviews:l})]}):Object(Oe.jsx)(Rt,{}),j===O&&Object(Oe.jsx)(gt,{})]})]})}),Object(Oe.jsx)("section",{className:"property__map map",children:Object(Oe.jsx)(at,{activeCityName:b.city.name,city:b.city,points:h,selectedPoint:b})})]}),Object(Oe.jsx)("div",{className:"container",children:Object(Oe.jsxs)("section",{className:"near-places places",children:[Object(Oe.jsx)("h2",{className:"near-places__title",children:"Other places in the neighbourhood"}),r?Object(Oe.jsx)(Ft,{nearbyPlaces:n,commonPlaces:i}):Object(Oe.jsx)(Rt,{})]})})]}),Object(Oe.jsx)("footer",{className:"footer container",children:Object(Oe.jsx)(u.b,{className:"footer__logo-link",to:"/",children:Object(Oe.jsx)("img",{className:"footer__logo",src:"img/logo.svg",alt:"6 cities logo",width:64,height:33})})})]})}));var Et=Xe((function(){return Object(Oe.jsxs)("div",{style:{margin:"auto",width:"200px"},children:[Object(Oe.jsx)("h1",{style:{textAlign:"center"},children:"404"}),Object(Oe.jsx)("h2",{children:"Page Not Found"})]})}));var Mt=function(e){var t=e.render,a=e.path,c=e.exact,s=Object(o.c)(Ee);return Object(Oe.jsx)(m.b,{path:a,exact:c,render:function(){return s===O?t():Object(Oe.jsx)(m.a,{to:p})}})},qt=a(11),zt=Object(qt.a)();var At=function(){var e=Object(o.c)(He);return Object(o.c)(Ke)?Object(Oe.jsx)(u.a,{history:zt,children:Object(Oe.jsxs)(m.d,{children:[Object(Oe.jsx)(m.b,{exact:!0,path:b,children:Object(Oe.jsx)(rt,{className:"page page--gray page--index"})}),Object(Oe.jsx)(m.b,{exact:!0,path:p,children:Object(Oe.jsx)(ut,{})}),Object(Oe.jsx)(Mt,{exact:!0,path:h,render:function(){return Object(Oe.jsx)(jt,{places:e,className:"page"})}}),Object(Oe.jsx)(m.b,{exact:!0,path:_,children:Object(Oe.jsx)(Lt,{className:"page"})}),Object(Oe.jsx)(m.b,{children:Object(Oe.jsx)(Et,{})})]})}):Object(Oe.jsx)(Rt,{})},Bt=function(e){return function(e){return function(t){return t.type===J&&zt.push(t.payload),e(t)}}},Dt=function(){var e=d.a.create({baseURL:"https://7.react.pages.academy/six-cities",timeout:5e3,headers:{"x-token":j}});return e.interceptors.response.use((function(e){return e}),(function(){})),e}(),Ut=Object(n.a)({reducer:Le,middleware:function(e){return e({thunk:{extraArgument:Dt}}).concat(Bt)}});_e.getIsTokenExist(Ut.dispatch),Ut.dispatch((function(e,t,a){return a.get(f).then((function(t){var a=t.data,c=_e.adaptPlacesToClient(a);e($(c))})).catch((function(e){}))})),r.a.render(Object(Oe.jsx)(s.a.StrictMode,{children:Object(Oe.jsx)(o.a,{store:Ut,children:Object(Oe.jsx)(At,{})})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.083cfc05.chunk.js.map