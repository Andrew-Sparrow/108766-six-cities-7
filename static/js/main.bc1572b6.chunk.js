(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{66:function(e,a,t){"use strict";t.r(a);var s,i=t(1),c=t.n(i),r=t(17),n=t.n(r),l=t(15),o=t(32),d=t(8),j=Object(d.a)(),m=t(21),p=t.n(m),h="/",_="/login",u="/favorites",b="/hotels/:id?",x=["Paris","Cologne","Brussels","Amsterdam","Hamburg","Dusseldorf"],v="AUTH",g="NO_AUTH",O="UNKNOWN",N="/hotels",f="/login",y="https://7.react.pages.academy/six-cities",w=5e3,k=401,P=null!==(s=localStorage.getItem("token"))&&void 0!==s?s:"",C=t(6),R=t(3),q=t(5),S=t(14),A=t(33),z=t(34),T=t(35),F=t.n(T),I=function(){function e(){Object(A.a)(this,e)}return Object(z.a)(e,null,[{key:"adaptToClient",value:function(e){var a=Object.assign({},e,{host:Object.assign({},e.host,{avatarUrl:e.host.avatar_url,isPro:e.host.is_pro}),isFavorite:e.is_favorite,isPremium:e.is_premium,maxAdults:e.max_adults,previewImage:e.preview_image});return delete a.host.avatar_url,delete a.host.is_pro,delete a.is_favorite,delete a.is_premium,delete a.max_adults,delete a.preview_image,a}},{key:"adaptCommentToClient",value:function(e){var a=Object.assign({},e,{comment:e.comment,date:e.date,id:e.id,rating:e.rating,user:Object.assign({},e.user,{avatarUrl:e.user.avatar_url,isPro:e.user.is_pro,id:e.user.id,name:e.user.name})});return delete a.user.avatar_url,delete a.user.is_pro,a}},{key:"adaptToServer",value:function(e){return Object.assign({},{})}},{key:"getFavoritePlacesSeparatedByCity",value:function(e){var a=new Map;return e.forEach((function(e){e.isFavorite&&(a.has(e.city.name)||a.set(e.city.name,[]),a.get(e.city.name).push(e))})),a}},{key:"getFilteredPlaces",value:function(e,a){return a.filter((function(a){return a.city.name===e}))}},{key:"generateIdKeys",value:function(e){return new Array(e).fill("").map((function(){return F()(10)}))}},{key:"getWidthByRating",value:function(e){return 100*Math.round(e)/5}}]),e}();I.isCheckedAuth=function(e){return e===O},I.formatDate=function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short"})};var H=I,L=t(0);var D=function(e){var a=e.price,t=e.title,s=e.isFavorite,i=e.type;return Object(L.jsxs)("div",{className:"place-card__info",children:[Object(L.jsxs)("div",{className:"place-card__price-wrapper",children:[Object(L.jsxs)("div",{className:"place-card__price",children:[Object(L.jsxs)("b",{className:"place-card__price-value",children:["\u20ac",a]}),Object(L.jsx)("span",{className:"place-card__price-text",children:"/\xa0night"})]}),Object(L.jsxs)("button",{className:"place-card__bookmark-button button",type:"button",children:[Object(L.jsx)("svg",{className:"place-card__bookmark-icon",width:"18",height:"19",style:{stroke:s&&"#4481c3",fill:s&&"#4481c3"},children:Object(L.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(L.jsx)("span",{className:"visually-hidden",children:"To bookmarks"})]})]}),Object(L.jsx)("div",{className:"place-card__rating rating",children:Object(L.jsxs)("div",{className:"place-card__stars rating__stars",children:[Object(L.jsx)("span",{style:{width:"80%"}}),Object(L.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(L.jsx)("h2",{className:"place-card__name",children:Object(L.jsx)(R.b,{to:b,children:t})}),Object(L.jsx)("p",{className:"place-card__type",children:i})]})};var B=function(e){var a=e.price,t=e.onListItemHover,s=e.id,i=e.title,c=e.isPremium,r=e.isFavorite,n=e.type,l=Object(q.h)();return Object(L.jsxs)("article",{className:"cities__place-card place-card",onMouseEnter:function(e){t(e.currentTarget)},id:s,onClick:function(e){s&&l.push(Object(q.f)("/hotels/:id",{id:s}))},children:[c&&Object(L.jsx)("div",{className:"place-card__mark",children:Object(L.jsx)("span",{children:"Premium"})}),Object(L.jsx)("div",{className:"cities__image-wrapper place-card__image-wrapper",children:Object(L.jsx)(R.b,{to:"/property/".concat(s),children:Object(L.jsx)("img",{className:"place-card__image",src:"img/apartment-01.jpg",width:"260",height:"200",alt:"Place"})})}),Object(L.jsx)(D,{price:a,title:i,isFavorite:r,type:n})]})},U=t(2),M=t.n(U);M.a.shape({id:M.a.number.isRequired,price:M.a.number.isRequired,bedrooms:M.a.number.isRequired,city:M.a.shape({location:M.a.shape({latitude:M.a.number.isRequired,longitude:M.a.number.isRequired,zoom:M.a.number.isRequired}).isRequired,name:M.a.string.isRequired}).isRequired,description:M.a.string.isRequired,goods:M.a.arrayOf(M.a.string).isRequired,host:M.a.shape({id:M.a.number.isRequired,avatarUrl:M.a.string,isPro:M.a.bool,name:M.a.string.isRequired}),images:M.a.arrayOf(M.a.string).isRequired,isFavorite:M.a.bool,isPremium:M.a.bool,location:M.a.shape({latitude:M.a.number.isRequired,longitude:M.a.number.isRequired,zoom:M.a.number.isRequired}),maxAdults:M.a.number,previewImage:M.a.string,rating:M.a.number.isRequired,title:M.a.string.isRequired,type:M.a.string.isRequired});var V=function(e){var a=e.places,t=e.onListItemHover,s=a.map((function(e){return H.adaptToClient(e)}));return Object(L.jsx)("div",{className:"cities__places-list places__list tabs__content",children:s.map((function(e){return Object(L.jsx)(B,{price:e.price,onListItemHover:t,id:e.id,title:e.title,isPremium:e.isPremium,isFavorite:e.isFavorite,type:e.type},e.id)}))})},W=t(12);var E=function(e){var a=e.className,t=e.children;return Object(L.jsxs)("div",{className:a,children:[Object(L.jsx)("header",{className:"header",children:Object(L.jsx)("div",{className:"container",children:Object(L.jsxs)("div",{className:"header__wrapper",children:[Object(L.jsx)("div",{className:"header__left",children:Object(L.jsx)(R.b,{className:"header__logo-link header__logo-link--active",to:"/",children:Object(L.jsx)("img",{className:"header__logo",src:"img/logo.svg",alt:"6 cities logo",width:"81",height:"41"})})}),Object(L.jsx)("nav",{className:"header__nav",children:Object(L.jsxs)("ul",{className:"header__nav-list",children:[Object(L.jsx)("li",{className:"header__nav-item user",children:Object(L.jsxs)(R.b,{className:"header__nav-link header__nav-link--profile",to:"/",children:[Object(L.jsx)("div",{className:"header__avatar-wrapper user__avatar-wrapper"}),Object(L.jsx)("span",{className:"header__user-name user__name",children:"Oliver.conner@gmail.com"})]})}),Object(L.jsx)("li",{className:"header__nav-item",children:Object(L.jsx)(R.b,{className:"header__nav-link",to:"/",children:Object(L.jsx)("span",{className:"header__signout",children:"Sign out"})})})]})})]})})}),t]})},K=function(e){return function(a){return Object(L.jsx)(E,{children:Object(L.jsx)(e,Object(W.a)({},a))})}};K.displayName="withLayout";var J=K,Z=t(13),Y=t.n(Z);t(65);var G=function(e,a){var t=Object(i.useState)(null),s=Object(S.a)(t,2),c=s[0],r=s[1];return Object(i.useEffect)((function(){if(null===c){var t=Y.a.map(e.current,{center:{lat:a.location.latitude,lng:a.location.longitude},zoom:9,zoomControl:!1,marker:!0});Y.a.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'}).addTo(t),r(t)}else void 0!==a.location&&c.panTo({lat:a.location.latitude,lng:a.location.longitude})}),[e,c,a]),c};var Q=function(e){var a=e.activeCityName,t=e.city,s=e.points,c=e.selectedPoint,r=Object(i.useRef)(null),n=G(r,t),l=Y.a.icon({iconUrl:"img/pin.svg",iconSize:[27,39],iconAnchor:[14,39]}),o=Y.a.icon({iconUrl:"img/pin-active.svg",iconSize:[27,39],iconAnchor:[14,39]});return Object(i.useEffect)((function(){n&&s.forEach((function(e){Y.a.marker({lat:e.location.latitude,lng:e.location.longitude},{icon:e.id===c.id?o:l}).addTo(n)}))}),[n,t,s,c,a,o,l]),Object(L.jsx)("div",{style:{height:"100%"},ref:r})},X="changeCity",$="data/loadPlaces",ee="user/requiredAuthorization",ae="user/logout",te=function(e){return{type:X,payload:e}},se=function(e){return{type:$,payload:e}},ie=function(e){return{type:ee,payload:e}};var ce=Object(C.b)((function(e){return{activeCityName:e.activeCityName}}),(function(e){return{onTabClick:function(a){e(te(a))}}}))((function(e){var a=e.activeCityName,t=e.onTabClick;return Object(L.jsx)("div",{className:"tabs",children:Object(L.jsx)("section",{className:"locations container",children:Object(L.jsx)("ul",{className:"locations__list tabs__list",children:x.map((function(e){return Object(L.jsx)("li",{className:"locations__item",children:Object(L.jsx)(R.b,{"data-city":e,className:"locations__item-link tabs__item ".concat(e===a&&"tabs__item--active"),to:"#",onClick:function(e){e.preventDefault(),t(e.currentTarget.dataset.city)},children:Object(L.jsx)("span",{children:e})})},e)}))})})})}));var re=function(){return Object(L.jsxs)("form",{className:"places__sorting",action:"#",method:"get",children:[Object(L.jsx)("span",{className:"places__sorting-caption",children:"Sort by\xa0"}),Object(L.jsxs)("span",{className:"places__sorting-type",tabIndex:"0",children:["Popular",Object(L.jsx)("svg",{className:"places__sorting-arrow",width:"7",height:"4",children:Object(L.jsx)("use",{xlinkto:"#icon-arrow-select"})})]}),Object(L.jsxs)("ul",{className:"places__options places__options--custom places__options--opened",children:[Object(L.jsx)("li",{className:"places__option places__option--active",tabIndex:"0",children:"Popular"}),Object(L.jsx)("li",{className:"places__option",tabIndex:"0",children:"Price: low to high"}),Object(L.jsx)("li",{className:"places__option",tabIndex:"0",children:"Price: high to low"}),Object(L.jsx)("li",{className:"places__option",tabIndex:"0",children:"Top rated first"})]})]})};var ne=function(e){var a=e.activeCityName;return Object(L.jsx)("div",{className:"cities",children:Object(L.jsxs)("div",{className:"cities__places-container cities__places-container--empty container",children:[Object(L.jsx)("section",{className:"cities__no-places",children:Object(L.jsxs)("div",{className:"cities__status-wrapper tabs__content",children:[Object(L.jsx)("b",{className:"cities__status",children:"No places to stay available"}),Object(L.jsxs)("p",{className:"cities__status-description",children:["We could not find any property available at the moment in ",a]})]})}),Object(L.jsx)("div",{className:"cities__right-section"})]})})};var le=J((function(e){var a=e.places,t=e.activeCityName,s=Object(i.useState)({}),c=Object(S.a)(s,2),r=c[0],n=c[1],l=H.getFilteredPlaces(t,a);return Object(L.jsxs)("main",{className:"page__main page__main--index",children:[Object(L.jsx)("h1",{className:"visually-hidden",children:"Cities"}),Object(L.jsx)(ce,{}),0===l.length?Object(L.jsx)(ne,{activeCityName:t}):Object(L.jsx)("div",{className:"cities",children:Object(L.jsxs)("div",{className:"cities__places-container container",children:[Object(L.jsxs)("section",{className:"cities__places places",children:[Object(L.jsx)("h2",{className:"visually-hidden",children:"Places"}),Object(L.jsxs)("b",{className:"places__found",children:[l.length," places to stay in ",t]}),Object(L.jsx)(re,{}),Object(L.jsx)(V,{places:l,onListItemHover:function(e){var t=a.find((function(a){return a.id===parseInt(e.id,10)}));n(t)}})]}),Object(L.jsx)("div",{className:"cities__right-section",children:Object(L.jsx)("section",{className:"cities__map map",children:Object(L.jsx)(Q,{activeCityName:t,city:0!==l.length&&l[0].city,points:l,selectedPoint:r})})})]})})]})})),oe=Object(C.b)((function(e){return{activeCityName:e.activeCityName}}),null)(le);var de=function(e){var a=e.price,t=e.title,s=e.type;return Object(L.jsxs)("article",{className:"favorites__card place-card",children:[Object(L.jsx)("div",{className:"favorites__image-wrapper place-card__image-wrapper",children:Object(L.jsx)(R.b,{to:"/",children:Object(L.jsx)("img",{className:"place-card__image",src:"img/apartment-small-03.jpg",width:150,height:110,alt:"Place"})})}),Object(L.jsxs)("div",{className:"favorites__card-info place-card__info",children:[Object(L.jsxs)("div",{className:"place-card__price-wrapper",children:[Object(L.jsxs)("div",{className:"place-card__price",children:[Object(L.jsxs)("b",{className:"place-card__price-value",children:["\u20ac",a]}),Object(L.jsx)("span",{className:"place-card__price-text",children:"/\xa0night"})]}),Object(L.jsxs)("button",{className:"place-card__bookmark-button place-card__bookmark-button--active button",type:"button",children:[Object(L.jsx)("svg",{className:"place-card__bookmark-icon",width:18,height:19,children:Object(L.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(L.jsx)("span",{className:"visually-hidden",children:"In bookmarks"})]})]}),Object(L.jsx)("div",{className:"place-card__rating rating",children:Object(L.jsxs)("div",{className:"place-card__stars rating__stars",children:[Object(L.jsx)("span",{style:{width:"100%"}}),Object(L.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(L.jsx)("h2",{className:"place-card__name",children:Object(L.jsx)(R.b,{to:"/",children:t})}),Object(L.jsx)("p",{className:"place-card__type",children:s})]})]})};var je=function(e){var a=e.city,t=e.favoritePlaces;return Object(L.jsxs)("li",{className:"favorites__locations-items",children:[Object(L.jsx)("div",{className:"favorites__locations locations locations--current",children:Object(L.jsx)("div",{className:"locations__item",children:Object(L.jsx)(R.b,{className:"locations__item-link",to:"/",children:Object(L.jsx)("span",{children:a})})})}),Object(L.jsx)("div",{className:"favorites__places",children:t.map((function(e){return Object(L.jsx)(de,{price:e.price,title:e.title,type:e.type},e.id)}))})]})};var me=function(e){var a=e.places,t=H.getFavoritePlacesSeparatedByCity(a);return Object(L.jsx)("ul",{className:"favorites__list",children:function(e){var a=[];return e.forEach((function(e,t){a.push(Object(L.jsx)(je,{city:t,favoritePlaces:e},e.city))})),a}(t)})};var pe=J((function(e){var a=e.places;return Object(L.jsxs)(i.Fragment,{children:[Object(L.jsx)("main",{className:"page__main page__main--favorites",children:Object(L.jsx)("div",{className:"page__favorites-container container",children:Object(L.jsxs)("section",{className:"favorites",children:[Object(L.jsx)("h1",{className:"favorites__title",children:"Saved listing"}),Object(L.jsx)(me,{places:a})]})})}),Object(L.jsx)("footer",{className:"footer container",children:Object(L.jsx)(R.b,{className:"footer__logo-link",to:"/",children:Object(L.jsx)("img",{className:"footer__logo",src:"img/logo.svg",alt:"6 cities logo",width:64,height:33})})})]})}));var he=Object(C.b)(null,(function(e){return{onSubmit:function(a){e(function(e){var a=e.login,t=e.password;return function(e,s,i){return i.post(f,{email:a,password:t}).then((function(e){var a=e.data;return localStorage.setItem("token",a.token)})).then((function(){return e(ie(v))}))}}(a))}}}))((function(e){var a=e.onSubmit,t=Object(i.useRef)(),s=Object(i.useRef)(),c=Object(q.h)();return Object(L.jsxs)(i.Fragment,{children:[Object(L.jsx)("div",{style:{display:"none"},children:Object(L.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",children:[Object(L.jsx)("symbol",{id:"icon-arrow-select",viewBox:"0 0 7 4",children:Object(L.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 0l3.5 2.813L7 0v1.084L3.5 4 0 1.084V0z"})}),Object(L.jsx)("symbol",{id:"icon-bookmark",viewBox:"0 0 17 18",children:Object(L.jsx)("path",{d:"M3.993 2.185l.017-.092V2c0-.554.449-1 .99-1h10c.522 0 .957.41.997.923l-2.736 14.59-4.814-2.407-.39-.195-.408.153L1.31 16.44 3.993 2.185z"})}),Object(L.jsx)("symbol",{id:"icon-star",viewBox:"0 0 13 12",children:Object(L.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.5 9.644L10.517 12 9.451 7.56 13 4.573l-4.674-.386L6.5 0 4.673 4.187 0 4.573 3.549 7.56 2.483 12 6.5 9.644z"})})]})}),Object(L.jsxs)("div",{className:"page page--gray page--login",children:[Object(L.jsx)("header",{className:"header",children:Object(L.jsx)("div",{className:"container",children:Object(L.jsxs)("div",{className:"header__wrapper",children:[Object(L.jsx)("div",{className:"header__left",children:Object(L.jsx)(R.b,{className:"header__logo-link",to:"/",children:Object(L.jsx)("img",{className:"header__logo",src:"img/logo.svg",alt:"6 cities logo",width:81,height:41})})}),Object(L.jsx)("nav",{className:"header__nav",children:Object(L.jsx)("ul",{className:"header__nav-list",children:Object(L.jsx)("li",{className:"header__nav-item user",children:Object(L.jsxs)(R.b,{className:"header__nav-link header__nav-link--profile",to:"/",children:[Object(L.jsx)("div",{className:"header__avatar-wrapper user__avatar-wrapper"}),Object(L.jsx)("span",{className:"header__login",children:"Sign in"})]})})})})]})})}),Object(L.jsx)("main",{className:"page__main page__main--login",children:Object(L.jsxs)("div",{className:"page__login-container container",children:[Object(L.jsxs)("section",{className:"login",children:[Object(L.jsx)("h1",{className:"login__title",children:"Sign in"}),Object(L.jsxs)("form",{className:"login__form form",action:"",method:"post",onSubmit:function(e){e.preventDefault(),a({login:t.current.value,password:s.current.value})},children:[Object(L.jsxs)("div",{className:"login__input-wrapper form__input-wrapper",children:[Object(L.jsx)("label",{className:"visually-hidden",children:"E-mail"}),Object(L.jsx)("input",{ref:t,className:"login__input form__input",type:"email",name:"email",placeholder:"Email",required:!0})]}),Object(L.jsxs)("div",{className:"login__input-wrapper form__input-wrapper",children:[Object(L.jsx)("label",{className:"visually-hidden",children:"Password"}),Object(L.jsx)("input",{ref:s,className:"login__input form__input",type:"password",name:"password",placeholder:"Password",required:!0})]}),Object(L.jsx)("button",{onClick:function(){return c.push(h)},className:"login__submit form__submit button",type:"submit",children:"Sign in"})]})]}),Object(L.jsx)("section",{className:"locations locations--login locations--current",children:Object(L.jsx)("div",{className:"locations__item",children:Object(L.jsx)(R.b,{className:"locations__item-link",to:"/",children:Object(L.jsx)("span",{children:"Amsterdam"})})})})]})})]})]})}));var _e=function(){var e=Object(i.useState)(""),a=Object(S.a)(e,2),t=a[0],s=a[1];return Object(L.jsxs)("form",{className:"reviews__form form",action:"#",method:"post",onSubmit:function(){},children:[Object(L.jsx)("label",{className:"reviews__label form__label",htmlFor:"review",children:"Your review"}),Object(L.jsxs)("div",{className:"reviews__rating-form form__rating",children:[Object(L.jsx)("input",{className:"form__rating-input visually-hidden",name:"rating",defaultValue:5,id:"5-stars",type:"radio"}),Object(L.jsx)("label",{htmlFor:"5-stars",className:"reviews__rating-label form__rating-label",title:"perfect",children:Object(L.jsx)("svg",{className:"form__star-image",width:37,height:33,children:Object(L.jsx)("use",{xlinkHref:"#icon-star"})})}),Object(L.jsx)("input",{className:"form__rating-input visually-hidden",name:"rating",defaultValue:4,id:"4-stars",type:"radio"}),Object(L.jsx)("label",{htmlFor:"4-stars",className:"reviews__rating-label form__rating-label",title:"good",children:Object(L.jsx)("svg",{className:"form__star-image",width:37,height:33,children:Object(L.jsx)("use",{xlinkHref:"#icon-star"})})}),Object(L.jsx)("input",{className:"form__rating-input visually-hidden",name:"rating",defaultValue:3,id:"3-stars",type:"radio"}),Object(L.jsx)("label",{htmlFor:"3-stars",className:"reviews__rating-label form__rating-label",title:"not bad",children:Object(L.jsx)("svg",{className:"form__star-image",width:37,height:33,children:Object(L.jsx)("use",{xlinkHref:"#icon-star"})})}),Object(L.jsx)("input",{className:"form__rating-input visually-hidden",name:"rating",defaultValue:2,id:"2-stars",type:"radio"}),Object(L.jsx)("label",{htmlFor:"2-stars",className:"reviews__rating-label form__rating-label",title:"badly",children:Object(L.jsx)("svg",{className:"form__star-image",width:37,height:33,children:Object(L.jsx)("use",{xlinkHref:"#icon-star"})})}),Object(L.jsx)("input",{className:"form__rating-input visually-hidden",name:"rating",defaultValue:1,id:"1-star",type:"radio"}),Object(L.jsx)("label",{htmlFor:"1-star",className:"reviews__rating-label form__rating-label",title:"terribly",children:Object(L.jsx)("svg",{className:"form__star-image",width:37,height:33,children:Object(L.jsx)("use",{xlinkHref:"#icon-star"})})})]}),Object(L.jsx)("textarea",{className:"reviews__textarea form__textarea",onChange:function(e){return function(e){e.preventDefault(),s(e.target.value)}(e)},value:t,id:"review",name:"review",placeholder:"Tell how was your stay, what you like and what can be improved"}),Object(L.jsxs)("div",{className:"reviews__button-wrapper",children:[Object(L.jsxs)("p",{className:"reviews__help",children:["To submit review please make sure to set ",Object(L.jsx)("span",{className:"reviews__star",children:"rating"})," and describe your stay with at least ",Object(L.jsx)("b",{className:"reviews__text-amount",children:"50 characters"}),"."]}),Object(L.jsx)("button",{className:"reviews__submit form__submit button",type:"submit",disabled:!0,children:"Submit"})]})]})};var ue=function(e){var a=e.avatarImgPath,t=e.date,s=e.text,i=e.name,c=e.rating,r=H.getWidthByRating(c);return Object(L.jsxs)("li",{className:"reviews__item",children:[Object(L.jsxs)("div",{className:"reviews__user user",children:[Object(L.jsx)("div",{className:"reviews__avatar-wrapper user__avatar-wrapper",children:Object(L.jsx)("img",{className:"reviews__avatar user__avatar",src:a,width:54,height:54,alt:"Reviews avatar"})}),Object(L.jsx)("span",{className:"reviews__user-name",children:i})]}),Object(L.jsxs)("div",{className:"reviews__info",children:[Object(L.jsx)("div",{className:"reviews__rating rating",children:Object(L.jsxs)("div",{className:"reviews__stars rating__stars",children:[Object(L.jsx)("span",{style:{width:"".concat(r,"%")}}),Object(L.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(L.jsx)("p",{className:"reviews__text",children:s}),Object(L.jsx)("time",{className:"reviews__time",dateTime:t,children:H.formatDate(t)})]})]})};var be=function(e){var a=e.reviews.slice(0,10);return Object(L.jsx)("ul",{className:"reviews__list",children:a.map((function(e){var a=H.adaptCommentToClient(e);return Object(L.jsx)(ue,{avatarImgPath:a.user.avatarUrl,date:a.date,text:a.comment,name:a.user.name,rating:a.rating},a.id)}))})};var xe=function(e){var a=e.imgPath;return Object(L.jsx)("div",{className:"property__image-wrapper",children:Object(L.jsx)("img",{className:"property__image",src:a,alt:"studio"})})};var ve=function(e){var a=e.images,t=H.generateIdKeys(a.length);return Object(L.jsx)("div",{className:"property__gallery-container container",children:Object(L.jsx)("div",{className:"property__gallery",children:a.map((function(e,a){return Object(L.jsx)(xe,{imgPath:e},t[a])}))})})};var ge=function(e){var a=e.good;return Object(L.jsx)("li",{className:"property__inside-item",children:a})};var Oe=function(e){var a=e.goods,t=H.generateIdKeys(a.length);return Object(L.jsx)("ul",{className:"property__inside-list",children:a.map((function(e,a){return Object(L.jsx)(ge,{good:e},t[a])}))})},Ne=[{id:1,price:220,bedrooms:3,type:"apartment",title:"Beautiful & luxurious studio at great location",city:{name:"Amsterdam",location:{latitude:52.38333,longitude:4.9,zoom:12}},description:"A quiet cozy and picturesque that hides behind a a river by the unique lightness of Amsterdam.",goods:["Heating","Kitchen","Cable TV","Washing machine","Coffee machine","Dishwasher"],host:{id:3,avatar_url:"img/1.png",is_pro:!0,name:"Angelina"},images:["img/room.jpg","img/room.jpg"],is_favorite:!0,is_premium:!0,location:{latitude:52.3909553943508,longitude:4.85309666406198,zoom:8},max_adults:4,preview_image:"img/room.jpg",rating:4},{id:2,price:120,bedrooms:3,city:{name:"Amsterdam",location:{latitude:52.38333,longitude:4.9,zoom:10}},description:"A quiet cozy and picturesque that hides behind a a river by the unique lightness of Amsterdam.",goods:["Heating","Kitchen","Cable TV","Washing machine","Coffee machine","Dishwasher"],host:{avatar_url:"img/1.png",id:3,isPro:!0,name:"Angelina"},images:["img/apartment-02.jpg","img/apartment-02.jpg"],is_favorite:!0,is_premium:!1,location:{latitude:52.369553943508,longitude:4.85309666406198,zoom:8},max_adults:4,preview_image:"img/apartment-02.jpg",rating:4.8,title:"Beautiful & luxurious studio at great location",type:"apartment"},{id:3,price:120,bedrooms:3,city:{location:{latitude:52.38333,longitude:4.9,zoom:10},name:"Amsterdam"},description:"A quiet cozy and picturesque that hides behind a a river by the unique lightness of Amsterdam.",goods:["Heating","Kitchen","Cable TV","Washing machine","Coffee machine","Dishwasher"],host:{avatar_url:"img/1.png",id:3,isPro:!0,name:"Angelina"},images:["img/apartment-03.jpg","img/apartment-03.jpg"],is_favorite:!1,is_premium:!1,location:{latitude:52.3909553943508,longitude:4.929309666406198,zoom:8},max_adults:4,preview_image:"img/apartment-03.jpg",rating:4.8,title:"Beautiful & luxurious studio at great location",type:"apartment"}];var fe=function(e){var a=e.price,t=e.id,s=e.title,i=e.isPremium,c=e.isFavorite,r=e.type,n=e.previewImage;return Object(L.jsxs)("article",{className:"near-places__card place-card",id:t,children:[i&&Object(L.jsx)("div",{className:"place-card__mark",children:Object(L.jsx)("span",{children:"Premium"})}),Object(L.jsx)("div",{className:"near-places__image-wrapper place-card__image-wrapper",children:Object(L.jsx)(R.b,{to:"/hotels/".concat(t),children:Object(L.jsx)("img",{className:"place-card__image",src:n,width:"260",height:"200",alt:"Place"})})}),Object(L.jsx)(D,{price:a,title:s,isFavorite:c,type:r})]})};var ye=function(){var e=Ne.map((function(e){return H.adaptToClient(e)}));return Object(L.jsx)("div",{className:"near-places__list places__list",children:e.map((function(e){return Object(L.jsx)(fe,{id:e.id,price:e.price,title:e.title,isPremium:e.isPremium,isFavorite:e.isFavorite,type:e.type,previewImage:e.previewImage},e.id)}))})},we=[{comment:"A quiet cozy and picturesque that hides behind a a river by the unique lightness of Amsterdam.",date:"2019-05-08T14:13:56.569Z",id:1,rating:4.2,user:{avatar_url:"img/avatar-max.jpg",id:4,is_pro:!1,name:"John"}},{comment:"A quiet cozy and pictu by the unique lightness of Amsterdam.",date:"2019-05-08T14:13:56.569Z",id:2,rating:2.8,user:{avatar_url:"img/avatar-max.jpg",id:5,is_pro:!1,name:"Smith"}}];var ke=J((function(e){var a=Object(q.i)().id,t=e.places.find((function(e){return e.id===+a})),s=H.adaptToClient(t),c=H.getWidthByRating(s.rating);return Object(L.jsxs)(i.Fragment,{children:[Object(L.jsxs)("main",{className:"page__main",children:[Object(L.jsxs)("section",{className:"property",children:[Object(L.jsx)(ve,{images:s.images}),Object(L.jsx)("div",{className:"property__container container",children:Object(L.jsxs)("div",{className:"property__wrapper",children:[s.isPremium&&Object(L.jsx)("div",{className:"property__mark",children:Object(L.jsx)("span",{children:"Premium"})}),Object(L.jsxs)("div",{className:"property__name-wrapper",children:[Object(L.jsx)("h1",{className:"property__name",children:s.description}),Object(L.jsxs)("button",{className:"property__bookmark-button button",type:"button",children:[Object(L.jsx)("svg",{className:"property__bookmark-icon",width:31,height:33,children:Object(L.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(L.jsx)("span",{className:"visually-hidden",children:"To bookmarks"})]})]}),Object(L.jsxs)("div",{className:"property__rating rating",children:[Object(L.jsxs)("div",{className:"property__stars rating__stars",children:[Object(L.jsx)("span",{style:{width:"".concat(c,"%")}}),Object(L.jsx)("span",{className:"visually-hidden",children:"Rating"})]}),Object(L.jsx)("span",{className:"property__rating-value rating__value",children:Math.round(s.rating)})]}),Object(L.jsxs)("ul",{className:"property__features",children:[Object(L.jsx)("li",{className:"property__feature property__feature--entire",children:s.type}),Object(L.jsxs)("li",{className:"property__feature property__feature--bedrooms",children:[s.bedrooms," Bedrooms"]}),Object(L.jsxs)("li",{className:"property__feature property__feature--adults",children:["Max ",s.maxAdults," adults"]})]}),Object(L.jsxs)("div",{className:"property__price",children:[Object(L.jsxs)("b",{className:"property__price-value",children:["\u20ac",s.price]}),Object(L.jsx)("span",{className:"property__price-text",children:"\xa0night"})]}),Object(L.jsxs)("div",{className:"property__inside",children:[Object(L.jsx)("h2",{className:"property__inside-title",children:"What's inside"}),Object(L.jsx)(Oe,{goods:s.goods})]}),Object(L.jsxs)("div",{className:"property__host",children:[Object(L.jsx)("h2",{className:"property__host-title",children:"Meet the host"}),Object(L.jsxs)("div",{className:"property__host-user user",children:[Object(L.jsx)("div",{className:"property__avatar-wrapper ".concat(s.host.isPro&&"property__avatar-wrapper--pro"," user__avatar-wrapper"),children:Object(L.jsx)("img",{className:"property__avatar user__avatar",src:s.host.avatarUrl,width:74,height:74,alt:"Host avatar"})}),Object(L.jsx)("span",{className:"property__user-name",children:s.host.name}),s.host.isPro&&Object(L.jsx)("span",{className:"property__user-status",children:"Pro"})]}),Object(L.jsx)("div",{className:"property__description",children:Object(L.jsx)("p",{className:"property__text",children:s.description})})]}),Object(L.jsxs)("section",{className:"property__reviews reviews",children:[Object(L.jsxs)("h2",{className:"reviews__title",children:["Reviews \xb7 ",Object(L.jsx)("span",{className:"reviews__amount",children:we.length})]}),Object(L.jsx)(be,{reviews:we}),Object(L.jsx)(_e,{})]})]})}),Object(L.jsx)("section",{className:"property__map map",children:Object(L.jsx)(Q,{activeCityName:s.city.name,city:s.city,points:Ne,selectedPoint:s})})]}),Object(L.jsx)("div",{className:"container",children:Object(L.jsxs)("section",{className:"near-places places",children:[Object(L.jsx)("h2",{className:"near-places__title",children:"Other places in the neighbourhood"}),Object(L.jsx)(ye,{}),Object(L.jsxs)("div",{className:"near-places__list places__list",children:[Object(L.jsxs)("article",{className:"near-places__card place-card",children:[Object(L.jsx)("div",{className:"near-places__image-wrapper place-card__image-wrapper",children:Object(L.jsx)("a",{href:"#",children:Object(L.jsx)("img",{className:"place-card__image",src:"img/room.jpg",width:260,height:200,alt:"Place"})})}),Object(L.jsxs)("div",{className:"place-card__info",children:[Object(L.jsxs)("div",{className:"place-card__price-wrapper",children:[Object(L.jsxs)("div",{className:"place-card__price",children:[Object(L.jsx)("b",{className:"place-card__price-value",children:"\u20ac80"}),Object(L.jsx)("span",{className:"place-card__price-text",children:"/\xa0night"})]}),Object(L.jsxs)("button",{className:"place-card__bookmark-button place-card__bookmark-button--active button",type:"button",children:[Object(L.jsx)("svg",{className:"place-card__bookmark-icon",width:18,height:19,children:Object(L.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(L.jsx)("span",{className:"visually-hidden",children:"In bookmarks"})]})]}),Object(L.jsx)("div",{className:"place-card__rating rating",children:Object(L.jsxs)("div",{className:"place-card__stars rating__stars",children:[Object(L.jsx)("span",{style:{width:"80%"}}),Object(L.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(L.jsx)("h2",{className:"place-card__name",children:Object(L.jsx)("a",{href:"#",children:"Wood and stone place"})}),Object(L.jsx)("p",{className:"place-card__type",children:"Private room"})]})]}),Object(L.jsxs)("article",{className:"near-places__card place-card",children:[Object(L.jsx)("div",{className:"near-places__image-wrapper place-card__image-wrapper",children:Object(L.jsx)("a",{href:"#",children:Object(L.jsx)("img",{className:"place-card__image",src:"img/apartment-02.jpg",width:260,height:200,alt:"Place"})})}),Object(L.jsxs)("div",{className:"place-card__info",children:[Object(L.jsxs)("div",{className:"place-card__price-wrapper",children:[Object(L.jsxs)("div",{className:"place-card__price",children:[Object(L.jsx)("b",{className:"place-card__price-value",children:"\u20ac132"}),Object(L.jsx)("span",{className:"place-card__price-text",children:"/\xa0night"})]}),Object(L.jsxs)("button",{className:"place-card__bookmark-button button",type:"button",children:[Object(L.jsx)("svg",{className:"place-card__bookmark-icon",width:18,height:19,children:Object(L.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(L.jsx)("span",{className:"visually-hidden",children:"To bookmarks"})]})]}),Object(L.jsx)("div",{className:"place-card__rating rating",children:Object(L.jsxs)("div",{className:"place-card__stars rating__stars",children:[Object(L.jsx)("span",{style:{width:"80%"}}),Object(L.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(L.jsx)("h2",{className:"place-card__name",children:Object(L.jsx)("a",{href:"#",children:"Canal View Prinsengracht"})}),Object(L.jsx)("p",{className:"place-card__type",children:"Apartment"})]})]}),Object(L.jsxs)("article",{className:"near-places__card place-card",children:[Object(L.jsx)("div",{className:"near-places__image-wrapper place-card__image-wrapper",children:Object(L.jsx)("a",{href:"#",children:Object(L.jsx)("img",{className:"place-card__image",src:"img/apartment-03.jpg",width:260,height:200,alt:"Place"})})}),Object(L.jsxs)("div",{className:"place-card__info",children:[Object(L.jsxs)("div",{className:"place-card__price-wrapper",children:[Object(L.jsxs)("div",{className:"place-card__price",children:[Object(L.jsx)("b",{className:"place-card__price-value",children:"\u20ac180"}),Object(L.jsx)("span",{className:"place-card__price-text",children:"/\xa0night"})]}),Object(L.jsxs)("button",{className:"place-card__bookmark-button button",type:"button",children:[Object(L.jsx)("svg",{className:"place-card__bookmark-icon",width:18,height:19,children:Object(L.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(L.jsx)("span",{className:"visually-hidden",children:"To bookmarks"})]})]}),Object(L.jsx)("div",{className:"place-card__rating rating",children:Object(L.jsxs)("div",{className:"place-card__stars rating__stars",children:[Object(L.jsx)("span",{style:{width:"100%"}}),Object(L.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(L.jsx)("h2",{className:"place-card__name",children:Object(L.jsx)("a",{href:"#",children:"Nice, cozy, warm big bed apartment"})}),Object(L.jsx)("p",{className:"place-card__type",children:"Apartment"})]})]})]})]})})]}),Object(L.jsx)("footer",{className:"footer container",children:Object(L.jsx)(R.b,{className:"footer__logo-link",to:"/",children:Object(L.jsx)("img",{className:"footer__logo",src:"img/logo.svg",alt:"6 cities logo",width:64,height:33})})})]})})),Pe=Object(C.b)((function(e){return{places:e.places}}),null)(ke);var Ce=function(){return Object(L.jsx)("h1",{children:"Ups..., Page Not Found"})};var Re=function(){return Object(L.jsx)("p",{children:"Loading..."})};var qe=Object(C.b)((function(e){return{authorizationStatus:e.authorizationStatus}}))((function(e){var a=e.render,t=e.path,s=e.exact,i=e.authorizationStatus;return Object(L.jsx)(q.b,{path:t,exact:s,render:function(e){return i===v?a(e):Object(L.jsx)(q.a,{to:_})}})}));var Se=Object(C.b)((function(e){return{places:e.places,authorizationStatus:e.authorizationStatus,isDataLoaded:e.isDataLoaded}}),null)((function(e){var a=e.authorizationStatus,t=e.isDataLoaded,s=e.places;return H.isCheckedAuth(a)||!t?Object(L.jsx)(Re,{}):Object(L.jsx)(R.a,{history:j,children:Object(L.jsxs)(q.d,{children:[Object(L.jsx)(q.b,{exact:!0,path:h,children:Object(L.jsx)(oe,{places:s,className:"page page--gray page--main"})}),Object(L.jsx)(q.b,{exact:!0,path:_,children:Object(L.jsx)(he,{})}),Object(L.jsx)(qe,{exact:!0,path:u,render:function(){return Object(L.jsx)(pe,{places:s,className:"page"})}}),Object(L.jsx)(q.b,{exact:!0,path:b,children:Object(L.jsx)(Pe,{price:0,className:"page"})}),Object(L.jsx)(q.b,{children:Object(L.jsx)(Ce,{})})]})})})),Ae=t(36),ze={activeCityName:"Paris",places:[],authorizationStatus:O,isDataLoaded:!1};var Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=p.a.create({baseURL:y,timeout:w,headers:{"x-token":P}});return a.interceptors.response.use((function(e){return new Promise((function(a,t){a(e)}))}),(function(a){return a.response?a.response.status!==k?new Promise((function(e,t){t(a)})):(localStorage.removeItem("token"),void(e?e.push(f):window.location=f)):new Promise((function(e,t){t(a)}))})),a}(j),Fe=Object(l.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case X:return Object(W.a)(Object(W.a)({},e),{},{activeCityName:a.payload});case $:return Object(W.a)(Object(W.a)({},e),{},{places:a.payload,isDataLoaded:!0});case ee:return Object(W.a)(Object(W.a)({},e),{},{authorizationStatus:a.payload});case ae:return Object(W.a)(Object(W.a)({},e),{},{authorizationStatus:g});default:return e}}),Object(Ae.composeWithDevTools)(Object(l.applyMiddleware)(o.a.withExtraArgument(Te))));Fe.dispatch((function(e,a,t){return t.get(f).then((function(){return e(ie(v))})).catch((function(){}))})),Fe.dispatch((function(e,a,t){return t.get(N).then((function(a){var t=a.data;return e(se(t))}))})),n.a.render(Object(L.jsx)(c.a.StrictMode,{children:Object(L.jsx)(C.a,{store:Fe,children:Object(L.jsx)(Se,{})})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.bc1572b6.chunk.js.map