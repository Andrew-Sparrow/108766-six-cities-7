(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{79:function(e,t,a){"use strict";a.r(t);var s,i=a(1),r=a.n(i),c=a(13),n=a.n(c),o=a(20),l=a(41),d=a(11),u=Object(d.a)(),m=a(42),j=a.n(m),p="https://7.react.pages.academy/six-cities",h=null!==(s=localStorage.getItem("token"))&&void 0!==s?s:"",b=a(6),_=a(8),g="/",v="/login",O="/favorites",x="/hotels/:id",f=["Paris","Cologne","Brussels","Amsterdam","Hamburg","Dusseldorf"],y="AUTH",N="NO_AUTH",w="UNKNOWN",k="UNAUTHORIZED",S="/hotels",C="/favorite",P="/comments",z="/login",R="Popular",F="Price: low to high",L="Price: high to low",T="Top rated first",I=a(17),q=a(26),A=a(43),B=a(44),E=a(45),M=a.n(E),D=function(){function e(){Object(A.a)(this,e)}return Object(B.a)(e,null,[{key:"adaptToClient",value:function(e){var t=Object.assign({},e,{host:Object.assign({},e.host,{avatarUrl:e.host.avatar_url,isPro:e.host.is_pro}),isFavorite:e.is_favorite,isPremium:e.is_premium,maxAdults:e.max_adults,previewImage:e.preview_image});return delete t.host.avatar_url,delete t.host.is_pro,delete t.is_favorite,delete t.is_premium,delete t.max_adults,delete t.preview_image,t}},{key:"adaptPlacesToClient",value:function(e){var t=this;return e.map((function(e){return t.adaptToClient(e)}))}},{key:"adaptCommentToClient",value:function(e){var t=Object.assign({},e,{comment:e.comment,date:e.date,id:e.id,rating:e.rating,user:Object.assign({},e.user,{avatarUrl:e.user.avatar_url,isPro:e.user.is_pro,id:e.user.id,name:e.user.name})});return delete t.user.avatar_url,delete t.user.is_pro,t}},{key:"adaptToServer",value:function(e){return Object.assign({},{})}},{key:"getFavoritePlacesSeparatedByCity",value:function(e){var t=new Map;return e.forEach((function(e){e.isFavorite&&(t.has(e.city.name)||t.set(e.city.name,[]),t.get(e.city.name).push(e))})),t}},{key:"getFilteredPlaces",value:function(e,t){return t.filter((function(t){return t.city.name===e}))}},{key:"generateIdKeys",value:function(e){return new Array(e).fill("").map((function(){return M()(10)}))}},{key:"getWidthByRating",value:function(e){return 100*Math.round(e)/5}},{key:"getUpdatedPlaces",value:function(e,t,a){var s=this.adaptToClient(a),i=Object(q.a)(t),r=i.findIndex((function(t){return t.id===e}));return i[r]=s,i}},{key:"getNearbyPlacesFromCommonPlaces",value:function(e,t){var a=[];return e.forEach((function(e){var s=t.findIndex((function(t){return t.id===e.id}));a.push(t[s])})),a}}]),e}();D.isCheckedAuth=function(e){return e===w},D.formatDate=function(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short"})},D.getSortedPlaces=function(e,t){var a=t.slice();switch(e){case R:return a;case F:return t.sort((function(e,t){return e.price-t.price}));case L:return function(e){return e.sort((function(e,t){return t.price-e.price}))}(t);case T:return function(e){return e.sort((function(e,t){return t.rating-e.rating}))}(t);default:return a}};var H=D,U=a(5),V="places/changeCity",W="places/sortBy",K="places/loadPlaces",J="places/loadNearbyPlaces",Y="places/removeNearbyPlaces",Z="comments/loadComments",G="comments/removeComments",Q="user/changeAuthorizationStatus",X="user/changeLogin",$="user/logout",ee="place/isFavorite",te="comment/changeLoadingCommentProcessStatus",ae="comment/showErrorCommentFormMessage",se="comment/changeCommentSendedSuccessfulyStatus",ie=function(e){return{type:te,payload:e}},re=function(e){return{type:se,payload:e}},ce=function(e,t){return{type:ae,payload:{isShowErrorMessage:e,errorMessageText:t}}},ne=function(e){return{type:V,payload:e}},oe=function(e){return{type:W,payload:e}},le=function(e){return{type:K,payload:e}},de=function(e){return{type:J,payload:e}},ue=function(e){return{type:Z,payload:e}},me=function(e){return{type:Q,payload:e}},je=function(e){return{type:X,payload:e}},pe=function(e,t){return{type:ee,payload:{id:e,newPlace:t}}},he=function(){return{type:Y}},be=function(){return{type:G}},_e=function(){return{type:$}},ge=function(e,t){return function(a,s,i){return i.post("".concat(C,"/").concat(e,"/").concat(t?1:0)).then((function(t){a(pe(e,t.data))})).catch((function(e){}))}},ve=a(0);var Oe=function(e){var t=e.id,a=e.price,s=e.title,i=e.isFavorite,r=e.type,c=e.width,n=e.favoriteClickHandler;return Object(ve.jsxs)("div",{className:"place-card__info",children:[Object(ve.jsxs)("div",{className:"place-card__price-wrapper",children:[Object(ve.jsxs)("div",{className:"place-card__price",children:[Object(ve.jsxs)("b",{className:"place-card__price-value",children:["\u20ac",a]}),Object(ve.jsx)("span",{className:"place-card__price-text",children:"/\xa0night"})]}),Object(ve.jsxs)("button",{className:"place-card__bookmark-button button",type:"button",onClick:n,children:[Object(ve.jsx)("svg",{className:"place-card__bookmark-icon",width:"18",height:"19",style:{stroke:i&&"#4481c3",fill:i&&"#4481c3"},children:Object(ve.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(ve.jsx)("span",{className:"visually-hidden",children:"To bookmarks"})]})]}),Object(ve.jsx)("div",{className:"place-card__rating rating",children:Object(ve.jsxs)("div",{className:"place-card__stars rating__stars",children:[Object(ve.jsx)("span",{style:{width:"".concat(c,"%")}}),Object(ve.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(ve.jsx)("h2",{className:"place-card__name",children:Object(ve.jsx)(U.a,{to:"/hotels/".concat(t),children:s})}),Object(ve.jsx)("p",{className:"place-card__type",children:r})]})};var xe=function(e){var t=e.id,a=e.price,s=e.onListItemHover,i=e.title,r=e.isPremium,c=e.isFavorite,n=e.type,o=e.rating,l=e.previewImage,d=H.getWidthByRating(o),u=Object(_.g)(),m=Object(b.c)(),j=Object(b.d)((function(e){return e.authorizationStatus}));return Object(ve.jsxs)("article",{className:"cities__place-card place-card",onMouseEnter:function(e){s(e.currentTarget)},id:t,children:[r&&Object(ve.jsx)("div",{className:"place-card__mark",children:Object(ve.jsx)("span",{children:"Premium"})}),Object(ve.jsx)("div",{className:"cities__image-wrapper place-card__image-wrapper",children:Object(ve.jsx)(U.a,{to:"/hotels/".concat(t),children:Object(ve.jsx)("img",{className:"place-card__image",src:l,width:"260",height:"200",alt:"Place"})})}),Object(ve.jsx)(Oe,{id:t,price:a,title:i,isFavorite:c,type:n,width:d,favoriteClickHandler:function(e){e.preventDefault(),j===N?u.push(v):m(ge(t,!c))}})]})},fe=a(4),ye=a.n(fe);ye.a.shape({id:ye.a.number.isRequired,price:ye.a.number.isRequired,bedrooms:ye.a.number.isRequired,city:ye.a.shape({location:ye.a.shape({latitude:ye.a.number.isRequired,longitude:ye.a.number.isRequired,zoom:ye.a.number.isRequired}).isRequired,name:ye.a.string.isRequired}).isRequired,description:ye.a.string.isRequired,goods:ye.a.arrayOf(ye.a.string).isRequired,host:ye.a.shape({id:ye.a.number.isRequired,avatarUrl:ye.a.string,isPro:ye.a.bool,name:ye.a.string.isRequired}),images:ye.a.arrayOf(ye.a.string).isRequired,isFavorite:ye.a.bool,isPremium:ye.a.bool,location:ye.a.shape({latitude:ye.a.number.isRequired,longitude:ye.a.number.isRequired,zoom:ye.a.number.isRequired}),maxAdults:ye.a.number,previewImage:ye.a.string,rating:ye.a.number.isRequired,title:ye.a.string.isRequired,type:ye.a.string.isRequired});var Ne=function(e){var t=e.places,a=e.onListItemHover;return Object(ve.jsx)("div",{className:"cities__places-list places__list tabs__content",children:t.map((function(e){return Object(ve.jsx)(xe,{id:e.id,price:e.price,onListItemHover:a,title:e.title,isPremium:e.isPremium,isFavorite:e.isFavorite,type:e.type,rating:e.rating,previewImage:e.previewImage},e.id)}))})},we=a(7);var ke=function(e){return Object(ve.jsx)("li",{className:"header__nav-item user",children:Object(ve.jsxs)(U.a,{className:"header__nav-link header__nav-link--profile",to:v,children:[Object(ve.jsx)("div",{className:"header__avatar-wrapper user__avatar-wrapper"}),Object(ve.jsx)("span",{className:"header__login",children:"Sign in"})]})})},Se=a(25);var Ce=Object(b.b)(null,(function(e){return{onSignOutClick:function(){e(_e())}}}))((function(e){var t=e.login,a=e.onSignOutClick;return Object(ve.jsxs)(i.Fragment,{children:[Object(ve.jsx)(Se.a,{trigger:["hover"],placement:"bottom",overlay:Object(ve.jsx)("div",{style:{height:100,width:150,fontSize:25},children:"Click to show up favorites"}),children:Object(ve.jsx)("li",{className:"header__nav-item user",children:Object(ve.jsxs)(U.a,{className:"header__nav-link header__nav-link--profile",to:O,children:[Object(ve.jsx)("div",{className:"header__avatar-wrapper user__avatar-wrapper"}),Object(ve.jsx)("span",{className:"header__user-name user__name",children:t})]})})}),Object(ve.jsx)("li",{className:"header__nav-item",children:Object(ve.jsx)(U.a,{className:"header__nav-link",to:g,onClick:function(){a()},children:Object(ve.jsx)("span",{className:"header__signout",children:"Sign out"})})})]})}));var Pe=Object(b.b)((function(e){return{login:e.loginValue,places:e.places,sortBy:e.sortBy,authorizationStatus:e.authorizationStatus}}),null)((function(e){var t=e.children,a=e.login,s=e.authorizationStatus,i=e.className;return Object(ve.jsxs)("div",{className:i,children:[Object(ve.jsx)("header",{className:"header",children:Object(ve.jsx)("div",{className:"container",children:Object(ve.jsxs)("div",{className:"header__wrapper",children:[Object(ve.jsx)("div",{className:"header__left",children:Object(ve.jsx)(U.a,{className:"header__logo-link header__logo-link--active",to:"/",children:Object(ve.jsx)("img",{className:"header__logo",src:"img/logo.svg",alt:"6 cities logo",width:"81",height:"41"})})}),Object(ve.jsx)("nav",{className:"header__nav",children:Object(ve.jsx)("ul",{className:"header__nav-list",children:s===y?Object(ve.jsx)(Ce,{login:a}):Object(ve.jsx)(ke,{})})})]})})}),t]})})),ze=function(e,t){return function(a){return Object(ve.jsx)(Pe,{className:t,children:Object(ve.jsx)(e,Object(we.a)({},a))})}};ze.displayName="withLayout";var Re=ze,Fe=a(18),Le=a.n(Fe);a(77);var Te=function(e,t){var a=Object(i.useState)(null),s=Object(I.a)(a,2),r=s[0],c=s[1];return Object(i.useEffect)((function(){if(null===r){var a=Le.a.map(e.current,{center:{lat:t.location.latitude,lng:t.location.longitude},zoom:12,zoomControl:!1,marker:!0});Le.a.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>'}).addTo(a),c(a)}else void 0!==t.location&&r.panTo({lat:t.location.latitude,lng:t.location.longitude})}),[e,r,t]),r};var Ie=function(e){var t=e.activeCityName,a=e.city,s=e.points,r=e.selectedPoint,c=Object(i.useRef)(null),n=Te(c,a),o=Le.a.icon({iconUrl:"img/pin.svg",iconSize:[27,39],iconAnchor:[14,39]}),l=Le.a.icon({iconUrl:"img/pin-active.svg",iconSize:[27,39],iconAnchor:[14,39]});return Object(i.useEffect)((function(){n&&s.forEach((function(e){Le.a.marker({lat:e.location.latitude,lng:e.location.longitude},{icon:e.id===r.id?l:o}).addTo(n)}))}),[n,a,s,r,t,l,o]),Object(ve.jsx)("div",{style:{height:"100%"},ref:c})};var qe=Object(b.b)((function(e){return{activeCityName:e.activeCityName}}),(function(e){return{onTabClick:function(t){e(ne(t)),e(oe(R))}}}))((function(e){var t=e.activeCityName,a=e.onTabClick;return Object(ve.jsx)("div",{className:"tabs",children:Object(ve.jsx)("section",{className:"locations container",children:Object(ve.jsx)("ul",{className:"locations__list tabs__list",children:f.map((function(e){return Object(ve.jsx)("li",{className:"locations__item",children:Object(ve.jsx)(U.a,{"data-city":e,className:"locations__item-link tabs__item ".concat(e===t&&"tabs__item--active"),to:"#",onClick:function(e){e.preventDefault(),a(e.currentTarget.dataset.city)},children:Object(ve.jsx)("span",{children:e})})},e)}))})})})}));var Ae=Object(b.b)((function(e){return{sortByValue:e.sortBy}}),(function(e){return{onSortChange:function(t){e(oe(t))}}}))((function(e){var t=e.sortByValue,a=e.onSortChange,s=Object(i.useState)(!1),r=Object(I.a)(s,2),c=r[0],n=r[1];return Object(ve.jsxs)("form",{className:"places__sorting",action:"#",method:"get",onClick:function(e){return function(e){e.preventDefault(),n((function(e){return!e}))}(e)},children:[Object(ve.jsx)("span",{className:"places__sorting-caption",children:"Sort by\xa0"}),Object(ve.jsxs)("span",{className:"places__sorting-type",tabIndex:"0",children:[t,Object(ve.jsx)("svg",{className:"places__sorting-arrow",width:"7",height:"4",children:Object(ve.jsx)("use",{xlinkHref:"#icon-arrow-select"})})]}),Object(ve.jsxs)("ul",{className:"places__options places__options--custom ".concat(c&&"places__options--opened"),children:[Object(ve.jsx)("li",{className:"places__option ".concat(t===R&&"places__option--active"),tabIndex:"0",onClick:function(e){e.preventDefault(),"LI"===e.target.tagName&&a(e.target.innerText)},children:R}),Object(ve.jsx)("li",{className:"places__option ".concat(t===F&&"places__option--active"),tabIndex:"0",onClick:function(e){e.preventDefault(),"LI"===e.target.tagName&&a(e.target.innerText)},children:F}),Object(ve.jsx)("li",{className:"places__option ".concat(t===L&&"places__option--active"),tabIndex:"0",onClick:function(e){e.preventDefault(),"LI"===e.target.tagName&&a(e.target.innerText)},children:L}),Object(ve.jsx)("li",{className:"places__option ".concat(t===T&&"places__option--active"),tabIndex:"0",onClick:function(e){e.preventDefault(),"LI"===e.target.tagName&&a(e.target.innerText)},children:T})]})]})}));var Be=function(e){var t=e.activeCityName;return Object(ve.jsx)("div",{className:"cities",children:Object(ve.jsxs)("div",{className:"cities__places-container cities__places-container--empty container",children:[Object(ve.jsx)("section",{className:"cities__no-places",children:Object(ve.jsxs)("div",{className:"cities__status-wrapper tabs__content",children:[Object(ve.jsx)("b",{className:"cities__status",children:"No places to stay available"}),Object(ve.jsxs)("p",{className:"cities__status-description",children:["We could not find any property available at the moment in ",t]})]})}),Object(ve.jsx)("div",{className:"cities__right-section"})]})})};var Ee=Re((function(e){var t=e.places,a=e.activeCityName,s=e.sortBy,r=Object(i.useState)({}),c=Object(I.a)(r,2),n=c[0],o=c[1],l=H.getFilteredPlaces(a,t),d=H.getSortedPlaces(s,l);return Object(ve.jsxs)("main",{className:"page__main page__main--index",children:[Object(ve.jsx)("h1",{className:"visually-hidden",children:"Cities"}),Object(ve.jsx)(qe,{}),0===d.length?Object(ve.jsx)(Be,{activeCityName:a}):Object(ve.jsx)("div",{className:"cities",children:Object(ve.jsxs)("div",{className:"cities__places-container container",children:[Object(ve.jsxs)("section",{className:"cities__places places",children:[Object(ve.jsx)("h2",{className:"visually-hidden",children:"Places"}),Object(ve.jsxs)("b",{className:"places__found",children:[d.length," places to stay in ",a]}),Object(ve.jsx)(Ae,{}),Object(ve.jsx)(Ne,{places:d,onListItemHover:function(e){var t=d.find((function(t){return t.id===parseInt(e.id,10)}));o(t)}})]}),Object(ve.jsx)("div",{className:"cities__right-section",children:Object(ve.jsx)("section",{className:"cities__map map",children:Object(ve.jsx)(Ie,{activeCityName:a,city:0!==d.length&&d[0].city,points:d,selectedPoint:n})})})]})})]})})),Me=Object(b.b)((function(e){return{activeCityName:e.activeCityName,places:e.places,sortBy:e.sortBy}}),null)(Ee);var De=function(e){var t=e.price,a=e.title,s=e.type;return Object(ve.jsxs)("article",{className:"favorites__card place-card",children:[Object(ve.jsx)("div",{className:"favorites__image-wrapper place-card__image-wrapper",children:Object(ve.jsx)(U.a,{to:"/",children:Object(ve.jsx)("img",{className:"place-card__image",src:"img/apartment-small-03.jpg",width:150,height:110,alt:"Place"})})}),Object(ve.jsxs)("div",{className:"favorites__card-info place-card__info",children:[Object(ve.jsxs)("div",{className:"place-card__price-wrapper",children:[Object(ve.jsxs)("div",{className:"place-card__price",children:[Object(ve.jsxs)("b",{className:"place-card__price-value",children:["\u20ac",t]}),Object(ve.jsx)("span",{className:"place-card__price-text",children:"/\xa0night"})]}),Object(ve.jsxs)("button",{className:"place-card__bookmark-button place-card__bookmark-button--active button",type:"button",children:[Object(ve.jsx)("svg",{className:"place-card__bookmark-icon",width:18,height:19,children:Object(ve.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(ve.jsx)("span",{className:"visually-hidden",children:"In bookmarks"})]})]}),Object(ve.jsx)("div",{className:"place-card__rating rating",children:Object(ve.jsxs)("div",{className:"place-card__stars rating__stars",children:[Object(ve.jsx)("span",{style:{width:"100%"}}),Object(ve.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(ve.jsx)("h2",{className:"place-card__name",children:Object(ve.jsx)(U.a,{to:"/",children:a})}),Object(ve.jsx)("p",{className:"place-card__type",children:s})]})]})};var He=function(e){var t=e.city,a=e.favoritePlaces;return Object(ve.jsxs)("li",{className:"favorites__locations-items",children:[Object(ve.jsx)("div",{className:"favorites__locations locations locations--current",children:Object(ve.jsx)("div",{className:"locations__item",children:Object(ve.jsx)(U.a,{className:"locations__item-link",to:"/",children:Object(ve.jsx)("span",{children:t})})})}),Object(ve.jsx)("div",{className:"favorites__places",children:a.map((function(e){return Object(ve.jsx)(De,{price:e.price,title:e.title,type:e.type},e.id)}))})]})};var Ue=function(e){var t=e.favoriteList;return Object(ve.jsx)("ul",{className:"favorites__list",children:Object(q.a)(t.keys()).map((function(e){return Object(ve.jsx)(He,{city:e,favoritePlaces:t.get(e)},e)}))})};var Ve=function(e){return Object(ve.jsx)("main",{className:"page__main page__main--favorites page__main--favorites-empty",children:Object(ve.jsx)("div",{className:"page__favorites-container container",children:Object(ve.jsxs)("section",{className:"favorites favorites--empty",children:[Object(ve.jsx)("h1",{className:"visually-hidden",children:"Favorites (empty)"}),Object(ve.jsxs)("div",{className:"favorites__status-wrapper",children:[Object(ve.jsx)("b",{className:"favorites__status",children:"Nothing yet saved."}),Object(ve.jsx)("p",{className:"favorites__status-description",children:"Save properties to narrow down search or plan your future trips."})]})]})})})};var We=Re((function(e){var t=e.places,a=H.getFavoritePlacesSeparatedByCity(t);return Object(ve.jsxs)(i.Fragment,{children:[0===a.size?Object(ve.jsx)(Ve,{}):Object(ve.jsx)("main",{className:"page__main page__main--favorites",children:Object(ve.jsx)("div",{className:"page__favorites-container container",children:Object(ve.jsxs)("section",{className:"favorites",children:[Object(ve.jsx)("h1",{className:"favorites__title",children:"Saved listing"}),Object(ve.jsx)(Ue,{favoriteList:a})]})})}),Object(ve.jsx)("footer",{className:"footer container",children:Object(ve.jsx)(U.a,{className:"footer__logo-link",to:"/",children:Object(ve.jsx)("img",{className:"footer__logo",src:"img/logo.svg",alt:"6 cities logo",width:64,height:33})})})]})}),"page page--favorites-empty");var Ke=Object(b.b)((function(e){return{authorizationStatus:e.authorizationStatus}}),(function(e){return{onSubmit:function(t){e(function(e){var t=e.login,a=e.password;return function(e,s,i){return i.post(z,{email:t,password:a}).then((function(t){localStorage.setItem("token",t.data.token),localStorage.setItem("login",t.data.email),e(je(t.data.email)),e(me(y))})).catch((function(e){}))}}(t))}}}))((function(e){var t=e.onSubmit,a=e.authorizationStatus,s=Object(i.useRef)(),r=Object(i.useRef)(),c=Object(_.g)();return Object(i.useEffect)((function(){a===y&&c.push(O)}),[a,c]),Object(ve.jsxs)(i.Fragment,{children:[Object(ve.jsx)("div",{style:{display:"none"},children:Object(ve.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",children:[Object(ve.jsx)("symbol",{id:"icon-arrow-select",viewBox:"0 0 7 4",children:Object(ve.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 0l3.5 2.813L7 0v1.084L3.5 4 0 1.084V0z"})}),Object(ve.jsx)("symbol",{id:"icon-bookmark",viewBox:"0 0 17 18",children:Object(ve.jsx)("path",{d:"M3.993 2.185l.017-.092V2c0-.554.449-1 .99-1h10c.522 0 .957.41.997.923l-2.736 14.59-4.814-2.407-.39-.195-.408.153L1.31 16.44 3.993 2.185z"})}),Object(ve.jsx)("symbol",{id:"icon-star",viewBox:"0 0 13 12",children:Object(ve.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.5 9.644L10.517 12 9.451 7.56 13 4.573l-4.674-.386L6.5 0 4.673 4.187 0 4.573 3.549 7.56 2.483 12 6.5 9.644z"})})]})}),Object(ve.jsxs)("div",{className:"page page--gray page--login",children:[Object(ve.jsx)("header",{className:"header",children:Object(ve.jsx)("div",{className:"container",children:Object(ve.jsxs)("div",{className:"header__wrapper",children:[Object(ve.jsx)("div",{className:"header__left",children:Object(ve.jsx)(U.a,{className:"header__logo-link",to:"/",children:Object(ve.jsx)("img",{className:"header__logo",src:"img/logo.svg",alt:"6 cities logo",width:81,height:41})})}),Object(ve.jsx)("nav",{className:"header__nav",children:Object(ve.jsx)("ul",{className:"header__nav-list"})})]})})}),Object(ve.jsx)("main",{className:"page__main page__main--login",children:Object(ve.jsxs)("div",{className:"page__login-container container",children:[Object(ve.jsxs)("section",{className:"login",children:[Object(ve.jsx)("h1",{className:"login__title",children:"Sign in"}),Object(ve.jsxs)("form",{className:"login__form form",action:"",method:"post",onSubmit:function(e){e.preventDefault(),t({login:s.current.value,password:r.current.value})},children:[Object(ve.jsxs)("div",{className:"login__input-wrapper form__input-wrapper",children:[Object(ve.jsx)("label",{className:"visually-hidden",children:"E-mail"}),Object(ve.jsx)("input",{ref:s,className:"login__input form__input",type:"email",name:"email",placeholder:"Email",required:!0})]}),Object(ve.jsxs)("div",{className:"login__input-wrapper form__input-wrapper",children:[Object(ve.jsx)("label",{className:"visually-hidden",children:"Password"}),Object(ve.jsx)("input",{ref:r,className:"login__input form__input",type:"password",name:"password",placeholder:"Password",required:!0})]}),Object(ve.jsx)("button",{className:"login__submit form__submit button",type:"submit",children:"Sign in"})]})]}),Object(ve.jsx)("section",{className:"locations locations--login locations--current",children:Object(ve.jsx)("div",{className:"locations__item",children:Object(ve.jsx)(U.a,{className:"locations__item-link",to:"/",children:Object(ve.jsx)("span",{children:"Amsterdam"})})})})]})})]})]})}));a(78);var Je=function(e){var t=e.disabled,a=e.isSending;return Object(ve.jsx)("button",{className:"reviews__submit form__submit button",type:"submit",disabled:t,children:a?"Sending ...":"Submit"})},Ye={5:"perfect",4:"good",3:"not bad",2:"badly",1:"terribly"};var Ze=function(e){var t=+e.index+1,a=e.rating===t;return Object(ve.jsxs)(i.Fragment,{children:[Object(ve.jsx)("input",{className:"form__rating-input ".concat(a?"form__rating-input--active":""," visually-hidden"),name:"rating",defaultValue:t,id:"".concat(t,"-stars"),type:"radio",defaultChecked:!1}),Object(ve.jsx)("label",{htmlFor:"".concat(t,"-stars"),className:"reviews__rating-label form__rating-label",title:Ye[t],children:Object(ve.jsx)("svg",{className:"form__star-image",width:37,height:33,children:Object(ve.jsx)("use",{xlinkHref:"#icon-star"})})})]})};var Ge=Object(b.b)((function(e){return{isCommentSending:e.isCommentSending,isShowCommentErrorMessage:e.isShowCommentErrorMessage,isCommentFormSendedSuccessfully:e.isCommentFormSendedSuccessfully,commentErrorMessage:e.commentErrorMessage}}),(function(e){return{onSubmit:function(t,a,s){var i,r,c;e((i=t,r=a,c=s,function(e,t,a){e(ie(!0)),a.post("".concat(P,"/").concat(i),{comment:r,rating:c}).then((function(t){e(ue(t.data)),e(ie(!1)),e(ce(!1)),e(re(!0))})).catch((function(t){e(ce(!0,t.message)),e(ie(!1)),e(re(!1))}))}))}}}))((function(e){var t=e.onSubmit,a=e.isCommentSending,s=e.isShowCommentErrorMessage,r=e.isCommentFormSendedSuccessfully,c=e.commentErrorMessage,n=Object(i.useState)(""),o=Object(I.a)(n,2),l=o[0],d=o[1],u=Object(i.useState)(0),m=Object(I.a)(u,2),j=m[0],p=m[1],h=Object(b.c)(),g=Object(_.h)().id,v=l.length<50||l.length>300||0===j,O=H.generateIdKeys(5),x=function(e){e.preventDefault(),t(g,l,j)};return Object(i.useEffect)((function(){r&&(d(""),p(0))}),[a,r]),Object(ve.jsx)("fieldset",{disabled:a,style:{border:"none"},children:Object(ve.jsxs)("form",{className:"reviews__form form",action:"",method:"post",onSubmit:function(e){x(e)},children:[Object(ve.jsx)("label",{className:"reviews__label form__label",htmlFor:"review",children:"Your review"}),Object(ve.jsx)("div",{className:"reviews__rating-form form__rating",onChange:function(e){p(+e.target.defaultValue)},children:O.map((function(e,t){return Object(ve.jsx)(Ze,{index:t,rating:j},e)})).reverse()}),Object(ve.jsx)(Se.a,{overlay:Object(ve.jsx)("div",{style:{height:100,width:200,fontSize:25,textAlign:"center"},children:c}),placement:"top",visible:s,animation:"zoom",children:Object(ve.jsx)("textarea",{className:"reviews__textarea form__textarea",onChange:function(e){return function(e){d(e.target.value)}(e)},id:"review",value:l,name:"review",placeholder:"Tell how was your stay, what you like and what can be improved",onFocus:function(){s&&h(ce(!1))}})}),Object(ve.jsxs)("div",{className:"reviews__button-wrapper",children:[Object(ve.jsxs)("p",{className:"reviews__help",children:["To submit review please make sure to set",Object(ve.jsx)("span",{className:"reviews__star",children:"rating"}),"and describe your stay with at least",Object(ve.jsx)("b",{className:"reviews__text-amount",children:"50 characters"}),"."]}),Object(ve.jsx)(Je,{disabled:v,isSending:a})]})]})})}));var Qe=function(e){var t=e.avatarImgPath,a=e.date,s=e.text,i=e.name,r=e.rating,c=H.getWidthByRating(r);return Object(ve.jsxs)("li",{className:"reviews__item",children:[Object(ve.jsxs)("div",{className:"reviews__user user",children:[Object(ve.jsx)("div",{className:"reviews__avatar-wrapper user__avatar-wrapper",children:Object(ve.jsx)("img",{className:"reviews__avatar user__avatar",src:t,width:54,height:54,alt:"Reviews avatar"})}),Object(ve.jsx)("span",{className:"reviews__user-name",children:i})]}),Object(ve.jsxs)("div",{className:"reviews__info",children:[Object(ve.jsx)("div",{className:"reviews__rating rating",children:Object(ve.jsxs)("div",{className:"reviews__stars rating__stars",children:[Object(ve.jsx)("span",{style:{width:"".concat(c,"%")}}),Object(ve.jsx)("span",{className:"visually-hidden",children:"Rating"})]})}),Object(ve.jsx)("p",{className:"reviews__text",children:s}),Object(ve.jsx)("time",{className:"reviews__time",dateTime:a,children:H.formatDate(a)})]})]})};var Xe=function(e){var t=e.reviews.slice(0,10);return Object(ve.jsx)("ul",{className:"reviews__list",children:t.map((function(e){var t=H.adaptCommentToClient(e);return Object(ve.jsx)(Qe,{avatarImgPath:t.user.avatarUrl,date:t.date,text:t.comment,name:t.user.name,rating:t.rating},t.id)}))})};var $e=function(e){var t=e.imgPath;return Object(ve.jsx)("div",{className:"property__image-wrapper",children:Object(ve.jsx)("img",{className:"property__image",src:t,alt:"studio"})})};var et=function(e){var t=e.images,a=H.generateIdKeys(t.length);return Object(ve.jsx)("div",{className:"property__gallery-container container",children:Object(ve.jsx)("div",{className:"property__gallery",children:t.map((function(e,t){return Object(ve.jsx)($e,{imgPath:e},a[t])}))})})};var tt=function(e){var t=e.good;return Object(ve.jsx)("li",{className:"property__inside-item",children:t})};var at=function(e){var t=e.goods,a=H.generateIdKeys(t.length);return Object(ve.jsx)("ul",{className:"property__inside-list",children:t.map((function(e,t){return Object(ve.jsx)(tt,{good:e},a[t])}))})},st=[{id:1,price:220,bedrooms:3,type:"apartment",title:"Beautiful & luxurious studio at great location",city:{name:"Amsterdam",location:{latitude:52.38333,longitude:4.9,zoom:12}},description:"A quiet cozy and picturesque that hides behind a a river by the unique lightness of Amsterdam.",goods:["Heating","Kitchen","Cable TV","Washing machine","Coffee machine","Dishwasher"],host:{id:3,avatar_url:"img/1.png",is_pro:!0,name:"Angelina"},images:["img/room.jpg","img/room.jpg"],is_favorite:!0,is_premium:!0,location:{latitude:52.3909553943508,longitude:4.85309666406198,zoom:8},max_adults:4,preview_image:"img/room.jpg",rating:4},{id:2,price:120,bedrooms:3,city:{name:"Amsterdam",location:{latitude:52.38333,longitude:4.9,zoom:10}},description:"A quiet cozy and picturesque that hides behind a a river by the unique lightness of Amsterdam.",goods:["Heating","Kitchen","Cable TV","Washing machine","Coffee machine","Dishwasher"],host:{avatar_url:"img/1.png",id:3,isPro:!0,name:"Angelina"},images:["img/apartment-02.jpg","img/apartment-02.jpg"],is_favorite:!0,is_premium:!1,location:{latitude:52.369553943508,longitude:4.85309666406198,zoom:8},max_adults:4,preview_image:"img/apartment-02.jpg",rating:4.8,title:"Beautiful & luxurious studio at great location",type:"apartment"},{id:3,price:120,bedrooms:3,city:{location:{latitude:52.38333,longitude:4.9,zoom:10},name:"Amsterdam"},description:"A quiet cozy and picturesque that hides behind a a river by the unique lightness of Amsterdam.",goods:["Heating","Kitchen","Cable TV","Washing machine","Coffee machine","Dishwasher"],host:{avatar_url:"img/1.png",id:3,isPro:!0,name:"Angelina"},images:["img/apartment-03.jpg","img/apartment-03.jpg"],is_favorite:!1,is_premium:!1,location:{latitude:52.3909553943508,longitude:4.929309666406198,zoom:8},max_adults:4,preview_image:"img/apartment-03.jpg",rating:4.8,title:"Beautiful & luxurious studio at great location",type:"apartment"}];var it=function(e){var t=e.id,a=e.price,s=e.title,i=e.isPremium,r=e.isFavorite,c=e.type,n=e.rating,o=e.previewImage,l=Object(b.c)(),d=Object(_.g)(),u=H.getWidthByRating(n),m=Object(b.d)((function(e){return e.authorizationStatus}));return Object(ve.jsxs)("article",{className:"near-places__card place-card",id:t,children:[i&&Object(ve.jsx)("div",{className:"place-card__mark",children:Object(ve.jsx)("span",{children:"Premium"})}),Object(ve.jsx)("div",{className:"near-places__image-wrapper place-card__image-wrapper",children:Object(ve.jsx)(U.a,{to:"/hotels/".concat(t),children:Object(ve.jsx)("img",{className:"place-card__image",src:o,width:"260",height:"200",alt:"Place"})})}),Object(ve.jsx)(Oe,{id:t,price:a,title:s,isFavorite:r,type:c,width:u,favoriteClickHandler:function(e){e.preventDefault(),m===N?d.push(v):l(ge(t,!r))}})]})};var rt=function(e){var t=e.nearbyPlaces,a=e.commonPlaces,s=H.getNearbyPlacesFromCommonPlaces(t,a);return Object(ve.jsx)("div",{className:"near-places__list places__list",children:s.map((function(e){return Object(ve.jsx)(it,{id:e.id,price:e.price,title:e.title,isPremium:e.isPremium,isFavorite:e.isFavorite,type:e.type,previewImage:e.previewImage},e.id)}))})};var ct=function(){return Object(ve.jsx)("p",{children:"Loading..."})};var nt=Re((function(e){var t=Object(_.h)().id,a=Object(b.c)(),s=Object(_.g)(),r=e.places,c=e.nearbyPlaces,n=e.comments,o=e.isCommentsLoaded,l=e.isNearbyPlacesLoaded,d=e.authorizationStatus,u=e.favoriteClickHandler,m=r.find((function(e){return e.id===+t})),j=H.getWidthByRating(m.rating);return Object(i.useEffect)((function(){return a(function(e){return function(t,a,s){return s.get("".concat(P,"/").concat(e)).then((function(e){t(ue(e.data))})).catch((function(e){}))}}(t)),a(function(e){return function(t,a,s){return s.get("".concat(S,"/").concat(e,"/nearby")).then((function(e){var a=e.data,s=H.adaptPlacesToClient(a);t(de(s))})).catch((function(e){}))}}(t)),function(){a(he()),a(be())}}),[t,a]),Object(ve.jsxs)(i.Fragment,{children:[Object(ve.jsxs)("main",{className:"page__main",children:[Object(ve.jsxs)("section",{className:"property",children:[Object(ve.jsx)(et,{images:m.images}),Object(ve.jsx)("div",{className:"property__container container",children:Object(ve.jsxs)("div",{className:"property__wrapper",children:[m.isPremium&&Object(ve.jsx)("div",{className:"property__mark",children:Object(ve.jsx)("span",{children:"Premium"})}),Object(ve.jsxs)("div",{className:"property__name-wrapper",children:[Object(ve.jsx)("h1",{className:"property__name",children:m.description}),Object(ve.jsxs)("button",{className:"property__bookmark-button button ".concat(m.isFavorite?"property__bookmark-button--active":""),type:"button",onClick:function(e){!function(e){e.preventDefault(),d===N?s.push(v):u(m.id,!m.isFavorite)}(e)},children:[Object(ve.jsx)("svg",{className:"property__bookmark-icon",width:31,height:33,children:Object(ve.jsx)("use",{xlinkHref:"#icon-bookmark"})}),Object(ve.jsx)("span",{className:"visually-hidden",children:"To bookmarks"})]})]}),Object(ve.jsxs)("div",{className:"property__rating rating",children:[Object(ve.jsxs)("div",{className:"property__stars rating__stars",children:[Object(ve.jsx)("span",{style:{width:"".concat(j,"%")}}),Object(ve.jsx)("span",{className:"visually-hidden",children:"Rating"})]}),Object(ve.jsx)("span",{className:"property__rating-value rating__value",children:Math.round(m.rating)})]}),Object(ve.jsxs)("ul",{className:"property__features",children:[Object(ve.jsx)("li",{className:"property__feature property__feature--entire",children:m.type}),Object(ve.jsxs)("li",{className:"property__feature property__feature--bedrooms",children:[m.bedrooms," Bedrooms"]}),Object(ve.jsxs)("li",{className:"property__feature property__feature--adults",children:["Max ",m.maxAdults," adults"]})]}),Object(ve.jsxs)("div",{className:"property__price",children:[Object(ve.jsxs)("b",{className:"property__price-value",children:["\u20ac",m.price]}),Object(ve.jsx)("span",{className:"property__price-text",children:"\xa0night"})]}),Object(ve.jsxs)("div",{className:"property__inside",children:[Object(ve.jsx)("h2",{className:"property__inside-title",children:"What's inside"}),Object(ve.jsx)(at,{goods:m.goods})]}),Object(ve.jsxs)("div",{className:"property__host",children:[Object(ve.jsx)("h2",{className:"property__host-title",children:"Meet the host"}),Object(ve.jsxs)("div",{className:"property__host-user user",children:[Object(ve.jsx)("div",{className:"property__avatar-wrapper ".concat(m.host.isPro&&"property__avatar-wrapper--pro"," user__avatar-wrapper"),children:Object(ve.jsx)("img",{className:"property__avatar user__avatar",src:m.host.avatarUrl,width:74,height:74,alt:"Host avatar"})}),Object(ve.jsx)("span",{className:"property__user-name",children:m.host.name}),m.host.isPro&&Object(ve.jsx)("span",{className:"property__user-status",children:"Pro"})]}),Object(ve.jsx)("div",{className:"property__description",children:Object(ve.jsx)("p",{className:"property__text",children:m.description})})]}),Object(ve.jsxs)("section",{className:"property__reviews reviews",children:[o?Object(ve.jsxs)(i.Fragment,{children:[Object(ve.jsxs)("h2",{className:"reviews__title",children:["Reviews \xb7 ",Object(ve.jsx)("span",{className:"reviews__amount",children:n.length})]}),Object(ve.jsx)(Xe,{reviews:n})]}):Object(ve.jsx)(ct,{}),d===y&&Object(ve.jsx)(Ge,{})]})]})}),Object(ve.jsx)("section",{className:"property__map map",children:Object(ve.jsx)(Ie,{activeCityName:m.city.name,city:m.city,points:st,selectedPoint:m})})]}),Object(ve.jsx)("div",{className:"container",children:Object(ve.jsxs)("section",{className:"near-places places",children:[Object(ve.jsx)("h2",{className:"near-places__title",children:"Other places in the neighbourhood"}),l?Object(ve.jsx)(rt,{nearbyPlaces:c,commonPlaces:r}):Object(ve.jsx)(ct,{})]})})]}),Object(ve.jsx)("footer",{className:"footer container",children:Object(ve.jsx)(U.a,{className:"footer__logo-link",to:"/",children:Object(ve.jsx)("img",{className:"footer__logo",src:"img/logo.svg",alt:"6 cities logo",width:64,height:33})})})]})})),ot=Object(b.b)((function(e){return{places:e.places,comments:e.comments,nearbyPlaces:e.nearbyPlaces,isCommentsLoaded:e.isCommentsLoaded,isNearbyPlacesLoaded:e.isNearbyPlacesLoaded,authorizationStatus:e.authorizationStatus}}),(function(e){return{favoriteClickHandler:function(t,a){e(ge(t,a))}}}))(nt);var lt=function(){return Object(ve.jsxs)(i.Fragment,{children:[Object(ve.jsx)("h1",{children:"404"}),Object(ve.jsx)("h2",{children:"Page Not Found"})]})};var dt=Object(b.b)((function(e){return{authorizationStatus:e.authorizationStatus}}))((function(e){var t=e.render,a=e.path,s=e.exact,i=e.authorizationStatus;return Object(ve.jsx)(_.b,{path:a,exact:s,render:function(){return i===y?t():Object(ve.jsx)(_.a,{to:v})}})}));var ut=Object(b.b)((function(e){return{places:e.places,authorizationStatus:e.authorizationStatus,isDataLoaded:e.isDataLoaded}}),null)((function(e){var t=e.isDataLoaded,a=e.places,s=e.authorizationStatus;return t?Object(ve.jsx)(_.c,{history:u,children:Object(ve.jsxs)(_.d,{children:[Object(ve.jsx)(_.b,{exact:!0,path:g,children:Object(ve.jsx)(Me,{className:"page page--gray page--index"})}),Object(ve.jsx)(_.b,{exact:!0,path:v,children:s===N||s===w?Object(ve.jsx)(Ke,{}):Object(ve.jsx)(Me,{className:"page page--gray page--index"})}),Object(ve.jsx)(dt,{exact:!0,path:O,render:function(){return Object(ve.jsx)(We,{places:a,className:"page"})}}),Object(ve.jsx)(_.b,{exact:!0,path:x,children:Object(ve.jsx)(ot,{className:"page"})}),Object(ve.jsx)(_.b,{children:Object(ve.jsx)(lt,{})})]})}):Object(ve.jsx)(ct,{})})),mt=a(48),jt={activeCityName:"Paris",places:[],comments:[],authorizationStatus:w,isDataLoaded:!1,isCommentsLoaded:!1,sortBy:R,loginValue:k,isNearbyPlacesLoaded:!1,commentText:"",commentRating:0,isCommentSending:!1,isShowCommentErrorMessage:!1,isCommentFormSendedSuccessfully:null,commentErrorMessage:null,nearbyPlaces:[]};var pt=function(){var e=j.a.create({baseURL:p,timeout:5e3,headers:{"x-token":h}});return e.interceptors.response.use((function(e){return new Promise((function(t,a){t(e)}))}),(function(e){return new Promise((function(t,a){a(e)}))})),e}(u),ht=Object(o.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return Object(we.a)(Object(we.a)({},e),{},{isCommentSending:t.payload});case se:return Object(we.a)(Object(we.a)({},e),{},{isCommentFormSendedSuccessfully:t.payload});case ae:return Object(we.a)(Object(we.a)({},e),{},{isShowCommentErrorMessage:t.payload.isShowErrorMessage,commentErrorMessage:t.payload.errorMessageText});case V:return Object(we.a)(Object(we.a)({},e),{},{activeCityName:t.payload});case W:return Object(we.a)(Object(we.a)({},e),{},{sortBy:t.payload});case K:return Object(we.a)(Object(we.a)({},e),{},{places:t.payload,isDataLoaded:!0});case J:return Object(we.a)(Object(we.a)({},e),{},{nearbyPlaces:t.payload,isNearbyPlacesLoaded:!0});case Y:return Object(we.a)(Object(we.a)({},e),{},{nearbyPlaces:[],isNearbyPlacesLoaded:!1});case Z:return Object(we.a)(Object(we.a)({},e),{},{comments:t.payload,isCommentsLoaded:!0});case G:return Object(we.a)(Object(we.a)({},e),{},{comments:[],isCommentsLoaded:!1});case Q:return Object(we.a)(Object(we.a)({},e),{},{authorizationStatus:t.payload});case ee:return Object(we.a)(Object(we.a)({},e),{},{places:H.getUpdatedPlaces(t.payload.id,e.places,t.payload.newPlace)});case X:return Object(we.a)(Object(we.a)({},e),{},{loginValue:t.payload});case $:return Object(we.a)(Object(we.a)({},e),{},{authorizationStatus:N,loginValue:k});default:return e}}),Object(mt.composeWithDevTools)(Object(o.applyMiddleware)(l.a.withExtraArgument(pt))));ht.dispatch((function(e,t,a){return a.get(S).then((function(t){var a=t.data,s=H.adaptPlacesToClient(a);e(le(s))})).catch((function(e){}))})),n.a.render(Object(ve.jsx)(r.a.StrictMode,{children:Object(ve.jsx)(b.a,{store:ht,children:Object(ve.jsx)(ut,{})})}),document.getElementById("root"))}},[[79,1,2]]]);
//# sourceMappingURL=main.c6087204.chunk.js.map